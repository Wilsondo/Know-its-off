{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/mnt/e/MyReact/new_frontend/src/components/editUser.js\";\nimport React, { Component } from 'react';\nimport { CircleSpinner } from 'react-spinners-kit';\nimport axios from 'axios';\nexport default class EditUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateUser = event => {\n      this.setState({\n        patchLoading: true\n      });\n\n      if (this.state.current_user.password !== this.state.confNewPassword) {\n        this.setState({\n          patchLoading: false\n        });\n        alert(\"Passwords dont match!\");\n        return;\n      }\n\n      axios.post('/login', {\n        email: this.state.current_user.email,\n        password: this.state.myPassword\n      }).then(result => {\n        axios.patch('/users/current', this.state.current_user).then(result => {\n          this.setState({\n            patchLoading: false\n          });\n          alert(\"User updated.\");\n        }).catch(error => {\n          this.setState({\n            patchLoading: false,\n            error_response: error.response.status\n          });\n\n          if (error.response.data === \"not authorized\") {\n            this.setState({\n              redirect: \"/\"\n            });\n          } else if (error.response.data) {\n            console.log(error.response.data);\n          }\n        });\n      }).catch(error => {\n        this.setState({\n          patchLoading: false\n        });\n        alert(\"Please enter a valid password\");\n      });\n      event.preventDefault();\n    };\n\n    this.deleteUser = event => {\n      this.setState({\n        deleteLoading: true\n      });\n      const r = window.confirm(\"Do you really want to delete this, it will be permanent!\");\n\n      if (r === true) {\n        axios.delete('/users/current').then(result => {\n          alert(\"Your account had been deleted\");\n          this.setState({\n            deleteLoading: false,\n            redirect: \"/\"\n          });\n        }).catch(error => {\n          this.setState({\n            deleteLoading: false,\n            error_response: error.response.data\n          });\n\n          if (error.response.data === \"not authorized\") {\n            this.setState({\n              redirect: \"/\"\n            });\n          } else if (error.response.data) {\n            console.log(error.response.data);\n          }\n        });\n      } else {\n        this.setState({\n          deleteLoading: false\n        });\n      }\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        current_user: { ...this.state.current_user,\n          [event.target.name]: event.target.value\n        }\n      });\n    };\n\n    this.handlePassChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handlePhoneChange = event => {\n      this.setState({\n        current_user: { ...this.state.current_user,\n          [event.target.name]: parseInt(event.target.value)\n        }\n      });\n    };\n\n    this.state = {\n      current_user: {\n        first_name: \"\",\n        last_name: \"\",\n        email: \"\",\n        phone_number: \"\",\n        password: \"\"\n      },\n      myPassword: \"\",\n      confNewPassword: \"\",\n      loading: true,\n      error: false,\n      patchLoading: false,\n      deleteLoading: false,\n      redirect: null\n    };\n  } //Get users appliances, add the names to the select form element\n\n\n  componentDidMount() {\n    axios.get(\"/users/current\") //can put anything in for an id here, it will always return the current_user\n    .then(result => {\n      this.setState({\n        loading: false,\n        current_user: {\n          first_name: result.data.first_name,\n          last_name: result.data.last_name,\n          email: result.data.email,\n          phone_number: result.data.phone_number,\n          password: \"\"\n        }\n      });\n    }).catch(error => {\n      this.setState({\n        loading: false,\n        error: true\n      });\n\n      if (error.response) {\n        this.setState({\n          error_response: error.response.status\n        });\n\n        if (error.response.data === \"not authorized\") {\n          this.setState({\n            redirect: \"/\"\n          });\n        } else if (error.response.data) {\n          console.log(error.response.data);\n        }\n      }\n    });\n  }\n\n  render() {\n    if (this.state.error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-5\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"There was an error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center m-5\",\n        children: /*#__PURE__*/_jsxDEV(CircleSpinner, {\n          size: 60,\n          color: \"#686769\",\n          loading: this.state.loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit User - Some fields are optional.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"first_name\",\n            id: \"inputFirstName\",\n            \"aria-describedby\": \"nameHelp\",\n            onChange: this.handleChange,\n            value: this.state.current_user.first_name,\n            placeholder: \"first name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"last_name\",\n            id: \"inputLastName\",\n            onChange: this.handleChange,\n            value: this.state.current_user.last_name,\n            placeholder: \"last name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email - Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"email\",\n            id: \"inputEmail\",\n            type: \"email\",\n            onChange: this.handleChange,\n            value: this.state.current_user.email,\n            placeholder: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"phone_number\",\n            id: \"inputPhoneNumber\",\n            onChange: this.handlePhoneChange,\n            value: this.state.current_user.phone_number,\n            placeholder: \"5555555555\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"New Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"password\",\n            id: \"inputNewPassword\",\n            type: \"password\",\n            onChange: this.handleChange,\n            value: this.state.current_user.password,\n            placeholder: \"new password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Confirm New Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"confNewPassword\",\n            id: \"inputConfNewPassword\",\n            type: \"password\",\n            onChange: this.handlePassChange,\n            value: this.state.confNewPassword,\n            placeholder: \"new password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Current Password - Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"myPassword\",\n            id: \"inputCurrentPassword\",\n            type: \"password\",\n            onChange: this.handlePassChange,\n            value: this.state.myPassword,\n            placeholder: \"current password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.updateUser,\n          className: \"btn btn-success\",\n          children: [\"Update User Settings\", /*#__PURE__*/_jsxDEV(CircleSpinner, {\n            size: 20,\n            color: \"#3BBCE5\",\n            loading: this.state.patchLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 86\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.deleteUser,\n          className: \"btn btn-danger\",\n          children: [\"Delete User Permantenly\", /*#__PURE__*/_jsxDEV(CircleSpinner, {\n            size: 20,\n            color: \"#3BBCE5\",\n            loading: this.state.deleteLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 88\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 1\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/editUser.js"],"names":["React","Component","CircleSpinner","axios","EditUser","constructor","props","updateUser","event","setState","patchLoading","state","current_user","password","confNewPassword","alert","post","email","myPassword","then","result","patch","catch","error","error_response","response","status","data","redirect","console","log","preventDefault","deleteUser","deleteLoading","r","window","confirm","delete","handleChange","target","name","value","handlePassChange","handlePhoneChange","parseInt","first_name","last_name","phone_number","loading","componentDidMount","get","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {CircleSpinner} from 'react-spinners-kit' \nimport axios from 'axios'\n\nexport default class EditUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current_user: {\n         first_name: \"\",\n         last_name: \"\",\n         email: \"\",\n         phone_number: \"\",\n         password: \"\"\n      },\n      myPassword: \"\",\n      confNewPassword: \"\",\n\t   loading: true,\n\t   error: false,\n\t   patchLoading: false,\n      deleteLoading: false,\n      redirect: null\n    };\n  }\n\n   //Get users appliances, add the names to the select form element\n   componentDidMount() {\n      axios.get(\"/users/current\")  //can put anything in for an id here, it will always return the current_user\n      .then((result) => {\n         this.setState({\n            loading: false,\n            current_user: {\n               first_name: result.data.first_name,\n               last_name: result.data.last_name,\n               email: result.data.email,\n               phone_number: result.data.phone_number,\n               password: \"\"\n            }\n         });\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         if(error.response){\n            this.setState({error_response: error.response.status});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         }\n      })\n   }\n\n   updateUser = (event) => {\n      this.setState({patchLoading:true});\n      if(this.state.current_user.password !== this.state.confNewPassword){\n         this.setState({patchLoading:false});\n         alert(\"Passwords dont match!\")\n         return\n      }\n      axios.post('/login', {email: this.state.current_user.email, password: this.state.myPassword})\n      .then((result) => {\n         axios.patch('/users/current', this.state.current_user)\n         .then((result) => {\n            this.setState({patchLoading: false});\n            alert(\"User updated.\");\n         })\n         .catch((error) => {\n            this.setState({patchLoading:false, error_response: error.response.status});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         })\n      })\n      .catch((error) => {\n         this.setState({patchLoading:false})\n         alert(\"Please enter a valid password\")\n      })\n      event.preventDefault();\n   }\n   deleteUser = (event) => {\n      this.setState({deleteLoading:true});\n      const r = window.confirm(\"Do you really want to delete this, it will be permanent!\");\n      if(r === true){\n         axios.delete('/users/current')\n         .then((result) => { \n            alert(\"Your account had been deleted\")\n            this.setState({deleteLoading: false, redirect:\"/\"});\n         })\n         .catch((error) => {\n            this.setState({deleteLoading:false,error_response: error.response.data});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         })\n      }\n      else{ this.setState({deleteLoading: false}) }\n   }\n\n   handleChange = (event) => {\n      this.setState({\n         current_user: {...this.state.current_user,[event.target.name]: event.target.value}\n      });\n   };\n   handlePassChange = (event) => {\n      this.setState({[event.target.name]: event.target.value})\n   }\n   handlePhoneChange = (event) => {\n      this.setState({\n         current_user: {...this.state.current_user,[event.target.name]:parseInt(event.target.value)}\n      })\n   }\n\n\trender(){\n\t\tif(this.state.error){ \n         return(<div className=\"m-5\"><h3>There was an error</h3></div>) \n      }\n\t\tif(this.state.loading){\n         return (\n            <div className=\"d-flex justify-content-center m-5\">\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n            </div>)\n\t\t}\n\t\treturn(\n<div className=\"m-5\">\n<h3>Edit User - Some fields are optional.</h3>\n<form>\n   <div className=\"form-group\">\n      <label>First Name</label>\n      <input className=\"form-control\" name=\"first_name\" id=\"inputFirstName\" aria-describedby=\"nameHelp\" onChange={this.handleChange} value={this.state.current_user.first_name} placeholder=\"first name\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Last Name</label>\n      <input className=\"form-control\" name=\"last_name\" id=\"inputLastName\" onChange={this.handleChange} value={this.state.current_user.last_name} placeholder=\"last name\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Email - Required</label>\n      <input className=\"form-control\" name=\"email\" id=\"inputEmail\" type=\"email\" onChange={this.handleChange} value={this.state.current_user.email} placeholder=\"email\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Phone Number</label>\n      <input className=\"form-control\" name=\"phone_number\" id=\"inputPhoneNumber\" onChange={this.handlePhoneChange} value={this.state.current_user.phone_number} placeholder=\"5555555555\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>New Password</label>\n      <input className=\"form-control\" name=\"password\" id=\"inputNewPassword\" type=\"password\" onChange={this.handleChange} value={this.state.current_user.password} placeholder=\"new password\"/>\n   </div>\n   \n   <div className=\"form-group\">\n      <label>Confirm New Password</label>\n      <input className=\"form-control\" name=\"confNewPassword\" id=\"inputConfNewPassword\" type=\"password\" onChange={this.handlePassChange} value={this.state.confNewPassword} placeholder=\"new password\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Current Password - Required</label>\n      <input className=\"form-control\" name=\"myPassword\" id=\"inputCurrentPassword\" type=\"password\" onChange={this.handlePassChange} value={this.state.myPassword} placeholder=\"current password\"/>\n   </div>\n\n   <button onClick={this.updateUser} className=\"btn btn-success\">Update User Settings<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.patchLoading} /></button>\n   <button onClick={this.deleteUser} className=\"btn btn-danger\">Delete User Permantenly<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.deleteLoading} /></button>\n</form>\n</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}