{"ast":null,"code":"var _jsxFileName = \"/mnt/e/MyReact/new_frontend/src/components/home.js\";\nimport React, { Component } from 'react';\nimport axiosBaseURL from '../axios.js';\nimport { Redirect } from 'react-router-dom';\nimport { CircleSpinner } from 'react-spinners-kit';\nimport GridApp from './grid/GridApp';\nimport GridContext from './grid/GridContext';\nimport Tile from './tile.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.count_dev_state = arr => {\n      var result = 0;\n\n      for (var x = 0; arr.length > x; x++) {\n        if (arr[x].device_state === 1) {\n          result++;\n        }\n      }\n\n      return result;\n    };\n\n    this.test = () => {\n      axiosBaseURL.get(\"/devices\").then(app_result => {\n        this.setState({\n          myDevices: app_result.data,\n          num_on: this.count_dev_state(app_result.data)\n        });\n        const context = this.context;\n        context.setItems(app_result.data);\n        this.setState({\n          loading: false\n        });\n      }).catch(error => {\n        this.setState({\n          loading: false,\n          error: true\n        });\n        console.log(\"error at get device: \", error.response);\n      });\n      this.forceUpdate();\n      Tile.forceUpdate;\n    };\n\n    this.state = {\n      myDevices: [],\n      loading: true,\n      error: false,\n      redirect: null\n    };\n  }\n\n  componentDidMount() {\n    axiosBaseURL.get(\"/devices\").then(app_result => {\n      this.setState({\n        myDevices: app_result.data,\n        num_on: this.count_dev_state(app_result.data)\n      });\n      const context = this.context;\n      context.setItems(app_result.data);\n      this.setState({\n        loading: false\n      });\n    }).catch(error => {\n      this.setState({\n        loading: false,\n        error: true\n      });\n      console.log(\"error at get device: \", error.response);\n    });\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center m-5\",\n        children: /*#__PURE__*/_jsxDEV(CircleSpinner, {\n          size: 60,\n          color: \"#686769\",\n          loading: this.state.loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 10\n      }, this);\n    }\n\n    if (this.state.error) {\n      if (this.state.redirect) {\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: this.state.redirect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 39\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"There was an error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: this.state.error_response\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row m-3 text-light\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-center\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row m-3 text-light\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-muted text-center\",\n            children: [this.state.num_on, \" of your appliances are on.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.test,\n            className: \"btn btn-info\",\n            children: \"test\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(GridApp, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }, this);\n  }\n\n}\nHome.contextType = GridContext;","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/home.js"],"names":["React","Component","axiosBaseURL","Redirect","CircleSpinner","GridApp","GridContext","Tile","Home","constructor","props","count_dev_state","arr","result","x","length","device_state","test","get","then","app_result","setState","myDevices","data","num_on","context","setItems","loading","catch","error","console","log","response","forceUpdate","state","redirect","componentDidMount","render","error_response","contextType"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axiosBaseURL from '../axios.js';\nimport {Redirect} from 'react-router-dom';\nimport {CircleSpinner} from 'react-spinners-kit';\nimport GridApp from './grid/GridApp';\nimport GridContext from './grid/GridContext';\nimport Tile from './tile.js';\n\nexport default class Home extends Component {\n   static contextType = GridContext\n   constructor(props) {\n      super(props);\n      this.state = {\n         myDevices: [],\n         loading: true,\n         error: false,\n         redirect: null, \n      };\n   };\n\ncount_dev_state = (arr) => {\n   var result = 0;\n   for(var x = 0; arr.length > x; x++){\n      if(arr[x].device_state === 1){\n         result++;\n      }\n   }\n   return result;\n}\n\ncomponentDidMount() {\n   axiosBaseURL.get(\"/devices\")\n      .then( (app_result) => {\n         this.setState({\n            myDevices: app_result.data,\n            num_on: this.count_dev_state(app_result.data)\n         })\n         const context = this.context\n         context.setItems(app_result.data)\n         this.setState({loading: false})\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         console.log(\"error at get device: \", error.response)\n      })\n}\n   test = () => {\n      axiosBaseURL.get(\"/devices\")\n      .then( (app_result) => {\n         this.setState({\n            myDevices: app_result.data,\n            num_on: this.count_dev_state(app_result.data)\n         })\n         const context = this.context\n         context.setItems(app_result.data)\n         this.setState({loading: false})\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         console.log(\"error at get device: \", error.response);\n      })\n      this.forceUpdate();\n      Tile.forceUpdate\n   }\n\n\nrender(){\n   if(this.state.loading) {\n       return (\n         <div className=\"d-flex justify-content-center m-5\">\n            <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n         </div>)\n   }\n   if(this.state.error) {\n      if(this.state.redirect) {return <Redirect to={this.state.redirect} />}\n      return(<div><h3>There was an error</h3><h3>{this.state.error_response}</h3></div>)\n   }\n   return(\n   <div>\n      <div className=\"row m-3 text-light\">\n         <div className=\"col\">\n            <h1 className=\"text-center\">Home</h1>\n         </div>\n      </div>\n      <div className=\"row m-3 text-light\">\n         <div className=\"col\">\n            <h6 className=\"text-muted text-center\">\n               {this.state.num_on} of your appliances are on.\n            </h6>\n            <button onClick={this.test} className=\"btn btn-info\">test</button>\n         </div>\n      </div>\n      <GridApp/>    \n   </div>\n   )\n}}\n"]},"metadata":{},"sourceType":"module"}