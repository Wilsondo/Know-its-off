{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/mnt/e/MyReact/new_frontend/src/components/home.js\";\nimport React, { Component } from 'react';\nimport axiosBaseURL from '../axios.js';\nimport { Redirect } from 'react-router-dom';\nimport { CircleSpinner } from 'react-spinners-kit';\nimport GridApp from './grid/GridApp';\nimport GridContext from './grid/GridContext';\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.count_dev_state = arr => {\n      var result = 0;\n\n      for (var x = 0; arr.length > x; x++) {\n        if (arr[x].device_state === 1) {\n          result++;\n        }\n      }\n\n      return result;\n    };\n\n    this.state = {\n      myDevices: [],\n      loading: true,\n      error: false,\n      redirect: null\n    };\n  }\n\n  componentDidMount() {\n    axiosBaseURL.get(\"/devices\").then(app_result => {\n      this.setState({\n        myDevices: app_result.data,\n        num_on: this.count_dev_state(app_result.data)\n      });\n      const context = this.context;\n      context.setItems(app_result.data);\n      this.setState({\n        loading: false\n      });\n    }).catch(error => {\n      this.setState({\n        loading: false,\n        error: true\n      });\n      console.log(\"error at get device: \", error.response);\n    });\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center m-5\",\n        children: /*#__PURE__*/_jsxDEV(CircleSpinner, {\n          size: 60,\n          color: \"#686769\",\n          loading: this.state.loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 10\n      }, this);\n    }\n\n    if (this.state.error) {\n      if (this.state.redirect) {\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: this.state.redirect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 39\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"There was an error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: this.state.error_response\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-center\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-muted text-center\",\n            children: [this.state.num_on, \" of your appliances are on.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(GridApp, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this);\n  }\n\n}\nHome.contextType = GridContext;","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/home.js"],"names":["React","Component","axiosBaseURL","Redirect","CircleSpinner","GridApp","GridContext","Home","constructor","props","count_dev_state","arr","result","x","length","device_state","state","myDevices","loading","error","redirect","componentDidMount","get","then","app_result","setState","data","num_on","context","setItems","catch","console","log","response","render","error_response","contextType"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,YAAP,MAAyB,aAAzB;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,SAAQC,aAAR,QAA4B,oBAA5B;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AAEA,eAAe,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;AAEzCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAChB,UAAMA,KAAN;;AADgB,SAUtBC,eAVsB,GAUHC,GAAD,IAAS;AACxB,UAAIC,MAAM,GAAG,CAAb;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeF,GAAG,CAACG,MAAJ,GAAaD,CAA5B,EAA+BA,CAAC,EAAhC,EAAmC;AAChC,YAAGF,GAAG,CAACE,CAAD,CAAH,CAAOE,YAAP,KAAwB,CAA3B,EAA6B;AAC1BH,UAAAA,MAAM;AACR;AACH;;AACD,aAAOA,MAAP;AACF,KAlBqB;;AAEhB,SAAKI,KAAL,GAAa;AACVC,MAAAA,SAAS,EAAE,EADD;AAEVC,MAAAA,OAAO,EAAE,IAFC;AAGVC,MAAAA,KAAK,EAAE,KAHG;AAIVC,MAAAA,QAAQ,EAAE;AAJA,KAAb;AAMF;;AAYJC,EAAAA,iBAAiB,GAAG;AACjBnB,IAAAA,YAAY,CAACoB,GAAb,CAAiB,UAAjB,EACIC,IADJ,CACWC,UAAD,IAAgB;AACpB,WAAKC,QAAL,CAAc;AACXR,QAAAA,SAAS,EAAEO,UAAU,CAACE,IADX;AAEXC,QAAAA,MAAM,EAAE,KAAKjB,eAAL,CAAqBc,UAAU,CAACE,IAAhC;AAFG,OAAd;AAIA,YAAME,OAAO,GAAG,KAAKA,OAArB;AACAA,MAAAA,OAAO,CAACC,QAAR,CAAiBL,UAAU,CAACE,IAA5B;AACA,WAAKD,QAAL,CAAc;AAACP,QAAAA,OAAO,EAAE;AAAV,OAAd;AACF,KATJ,EAUIY,KAVJ,CAUYX,KAAD,IAAW;AAChB,WAAKM,QAAL,CAAc;AAACP,QAAAA,OAAO,EAAE,KAAV;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAAd;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCb,KAAK,CAACc,QAA3C;AACF,KAbJ;AAcF;;AAEDC,EAAAA,MAAM,GAAE;AACL,QAAG,KAAKlB,KAAL,CAAWE,OAAd,EAAuB;AACnB,0BACE;AAAK,QAAA,SAAS,EAAC,mCAAf;AAAA,+BACG,QAAC,aAAD;AAAe,UAAA,IAAI,EAAE,EAArB;AAAyB,UAAA,KAAK,EAAC,SAA/B;AAAyC,UAAA,OAAO,EAAE,KAAKF,KAAL,CAAWE;AAA7D;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,cADF;AAIH;;AACD,QAAG,KAAKF,KAAL,CAAWG,KAAd,EAAqB;AAClB,UAAG,KAAKH,KAAL,CAAWI,QAAd,EAAwB;AAAC,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAE,KAAKJ,KAAL,CAAWI;AAAzB;AAAA;AAAA;AAAA;AAAA,gBAAP;AAA6C;;AACtE,0BAAO;AAAA,gCAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAL,eAAgC;AAAA,oBAAK,KAAKJ,KAAL,CAAWmB;AAAhB;AAAA;AAAA;AAAA;AAAA,gBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACF;;AACD,wBACA;AAAA,8BACG;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACG;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,iCACG;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,cADH,eAMG;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACG;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,iCACG;AAAI,YAAA,SAAS,EAAC,wBAAd;AAAA,uBACI,KAAKnB,KAAL,CAAWW,MADf;AAAA;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA;AADH;AAAA;AAAA;AAAA;AAAA,cANH,eA+BG,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cA/BH;AAAA;AAAA;AAAA;AAAA;AAAA,YADA;AAmCF;;AArF2C;AAAvBpB,I,CACX6B,W,GAAc9B,W","sourcesContent":["import React, {Component} from 'react';\nimport axiosBaseURL from '../axios.js';\nimport {Redirect} from 'react-router-dom';\nimport {CircleSpinner} from 'react-spinners-kit';\nimport GridApp from './grid/GridApp';\nimport GridContext from './grid/GridContext';\n\nexport default class Home extends Component {\n   static contextType = GridContext\n   constructor(props) {\n      super(props);\n      this.state = {\n         myDevices: [],\n         loading: true,\n         error: false,\n         redirect: null\n      };\n   };\n\ncount_dev_state = (arr) => {\n   var result = 0;\n   for(var x = 0; arr.length > x; x++){\n      if(arr[x].device_state === 1){\n         result++;\n      }\n   }\n   return result;\n}\n\ncomponentDidMount() {\n   axiosBaseURL.get(\"/devices\")\n      .then( (app_result) => {\n         this.setState({\n            myDevices: app_result.data,\n            num_on: this.count_dev_state(app_result.data)\n         })\n         const context = this.context\n         context.setItems(app_result.data)\n         this.setState({loading: false})\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         console.log(\"error at get device: \", error.response)\n      })\n}\n\nrender(){\n   if(this.state.loading) {\n       return (\n         <div className=\"d-flex justify-content-center m-5\">\n            <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n         </div>)\n   }\n   if(this.state.error) {\n      if(this.state.redirect) {return <Redirect to={this.state.redirect} />}\n      return(<div><h3>There was an error</h3><h3>{this.state.error_response}</h3></div>)\n   }\n   return(\n   <div>\n      <div className=\"App-header\">\n         <div className=\"col\">\n            <h1 className=\"text-center\">Home</h1>\n         </div>\n      </div>\n      <div className=\"App-header\">\n         <div className=\"col\">\n            <h6 className=\"text-muted text-center\">\n               {this.state.num_on} of your appliances are on.\n            </h6>\n         </div>\n      </div>\n      {/*<div className=\"row row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-1 m-3\">\n      <Tile key={this.state.myDevices.id} appliance_name={this.state.myDevices.appliance_name} device_battery={this.state.myDevices.battery_power} device_state={this.state.myDevices.device_state}/>\n   </div>*/}\n{/*      <GridContextProvider onChange={this.onChange}>\n         <div className=\"container\">\n            <GridDropZone id=\"this.state.myDevices\" boxesPerRow={4} rowHeight={100}>\n               {this.state.this.state.myDevices.map(device => (\n                  <GridItem key={device.id}>\n                     <div className=\"grid-item\">\n                        <div className=\"grid-item-content\" style={{width:\"100%\",height:\"100%\"}}>\n                           <Tile key={device.id} appliance_name={device.appliance_name} device_battery={device.battery_power} device_state={device.device_state}/>\n                        </div>\n                     </div>\n                  </GridItem>\n               ))}\n            </GridDropZone>\n         </div>\n      </GridContextProvider>*/}\n      <GridApp/>      \n   </div>\n   )\n}}\n"]},"metadata":{},"sourceType":"module"}