{"ast":null,"code":"import _defineProperty from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{CircleSpinner}from'react-spinners-kit';import{Link}from'react-router-dom';import axiosBaseURL from'../axios.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.doOAuth=function(event){_this.setState({OAuthLoading:true});axiosBaseURL.get('/glogin').then(function(result){window.location.href=result.data;console.log(\"auth_url is: \",result.data);});_this.props.history.push(\"/home\");};_this.doLogin=function(event){_this.setState({postLoading:true});axiosBaseURL.post('/login',{email:_this.state.email,password:_this.state.password,remember:_this.state.remember}).then(function(result){_this.setState({postLoading:false,flag:false});_this.props.history.push(\"/home\");}).catch(function(error){_this.setState({postLoading:false,flag:true});});event.preventDefault();};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.toggleCheckbox=function(){_this.setState(function(_ref){var remember=_ref.remember;return{remember:!remember};});};_this.state={loading:false,email:\"\",password:\"\",error:false,flag:false,postLoading:false,OAuthLoading:false,remember:true,auth_url:\"\"};return _this;}_createClass(Login,[{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsx(\"div\",{classNameName:\"m-5\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"There was an error\"})});}if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{classNameName:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}var flag=this.state.flag;// <a href={{ url_for('oauth_authorize', provider='google') }}><img src=\"{{ url_for('static', filename='img/sign-in-with-google.png') }}\" /></a>\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 mb-5 container bg-dark border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-md-center text-light mt-5\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Log In to Know It's Off\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-md-center text-light mb-5\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[flag&&/*#__PURE__*/_jsx(\"div\",{color:\"red\",children:\"Email or password incorrect\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",className:\"form-control\",value:this.state.email,onChange:this.handleChange,id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",onChange:this.handleChange,value:this.state.password,className:\"form-control\",id:\"exampleInputPassword1\",placeholder:\"Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:this.state.remember,onChange:this.toggleCheckbox,id:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",for:\"checkbox\",children:\"Remember Me\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.doLogin,className:\"btn btn-primary\",children:[\"Submit\",/*#__PURE__*/_jsx(CircleSpinner,{size:20,color:\"#3BBCE5\",loading:this.state.postLoading})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.doOAuth,className:\"btn btn-primary\",children:[\"Sign in with Google\",/*#__PURE__*/_jsx(CircleSpinner,{size:20,color:\"#3BBCE5\",loading:this.state.OAuthLoading})]}),/*#__PURE__*/_jsx(Link,{id:\"signupHelp\",to:\"/signup\",className:\"form-text text-muted\",children:\"Register New User\"})]})})]});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/login.js"],"names":["React","Component","CircleSpinner","Link","axiosBaseURL","Login","props","doOAuth","event","setState","OAuthLoading","get","then","result","window","location","href","data","console","log","history","push","doLogin","postLoading","post","email","state","password","remember","flag","catch","error","preventDefault","handleChange","target","name","value","toggleCheckbox","loading","auth_url"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {CircleSpinner} from 'react-spinners-kit' \nimport {Link} from 'react-router-dom';\nimport axiosBaseURL from '../axios.js'\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n\t    loading: false,\n\t    email: \"\",\n\t    password: \"\",\n      error: false,\n      flag: false, \n\t    postLoading: false, \n      OAuthLoading: false,\n      remember: true, \n      auth_url: \"\"\n    };\n  }\n  \n  doOAuth = (event) => {\n    this.setState({OAuthLoading:true});\n    axiosBaseURL.get('/glogin').then((result) => {\n      window.location.href = result.data;\n      console.log(\"auth_url is: \", result.data)\n    });\n    this.props.history.push(\"/home\"); \n  }\n\n  doLogin = (event) => {\n\t  this.setState({postLoading:true});\n\t  axiosBaseURL.post('/login', {email: this.state.email, password: this.state.password, remember: this.state.remember})\n\t  .then(\n\t\t  (result) =>{this.setState({postLoading: false, flag:false}); \n      this.props.history.push(\"/home\"); \n    })\n    .catch((error)=>{this.setState({postLoading:false, flag:true});\n    })\n\t  event.preventDefault();\n  };\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n   //trys to check if authenticated already and redirect\n   //when logging out its a little slow so it authenticates and redirects too quickly\n\n  toggleCheckbox = () => {\n    this.setState(({ remember }) => (\n      {\n        remember: !remember\n      }\n    ));\n  }\n\n\trender(){\n\t\tif(this.state.error){\n\t\t\treturn(<div classNameName=\"m-5\"><h3>There was an error</h3></div>)\n\t\t}\n\t\tif(this.state.loading){\n      \t\t\treturn (<div classNameName=\"d-flex justify-content-center m-5\"><CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} /></div>)\n    }\n    const {flag} = this.state;\n    // <a href={{ url_for('oauth_authorize', provider='google') }}><img src=\"{{ url_for('static', filename='img/sign-in-with-google.png') }}\" /></a>\n\t\treturn(\n<div className=\"mt-5 mb-5 container bg-dark border\">\n<div className=\"row justify-content-md-center text-light mt-5\">\n<h1>Log In to Know It's Off</h1>\n</div>\n<div className=\"row justify-content-md-center text-light mb-5\">\n<form>\n  <div className=\"form-group\">\n    {flag && (\n      <div color=\"red\">Email or password incorrect</div>\n    )}\n    <label>Email address</label>\n    <input name=\"email\" type=\"email\" className=\"form-control\" value={this.state.email} onChange={this.handleChange} id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\" />\n  </div>\n  <div className=\"form-group\">\n    <label>Password</label>\n    <input name=\"password\" type=\"password\" onChange={this.handleChange} value={this.state.password} className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" />\n  </div>\n  <div className=\"form-check\">\n    <input className=\"form-check-input\" type=\"checkbox\" checked={this.state.remember} onChange={this.toggleCheckbox} id=\"checkbox\"/>\n    <label className=\"form-check-label\" for=\"checkbox\">Remember Me</label>\n  </div>\n  <button onClick={this.doLogin} className=\"btn btn-primary\">Submit<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.postLoading} /></button>\n  <button onClick={this.doOAuth} className=\"btn btn-primary\">Sign in with Google<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.OAuthLoading}/></button>\n  <Link id=\"signupHelp\" to=\"/signup\" className=\"form-text text-muted\">Register New User</Link>\n</form>\n</div>\n</div>\n\t\t)\n\t}\n\t\n\n}\n\n"]},"metadata":{},"sourceType":"module"}