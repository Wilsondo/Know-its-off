{"ast":null,"code":"import _defineProperty from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{CircleSpinner}from'react-spinners-kit';import axiosBaseURL from'../axios.js';import Tile from\"./tile.js\";var addDevice=/*#__PURE__*/function(_Component){_inherits(addDevice,_Component);var _super=_createSuper(addDevice);function addDevice(props){var _this;_classCallCheck(this,addDevice);_this=_super.call(this,props);_this.postData=function(event){_this.setState({postLoading:true});//if creating a new appliance post it first\nif(_this.state.myDevice.id===\"0\"){axiosBaseURL.post('/device',_this.state.myDevice).then(function(result){_this.setState({myDevice:_objectSpread(_objectSpread({},_this.state.myDevice),{},{id:result.data.id}),postLoading:false,revealDetails:true});alert(\"Device Creation Successful!\");return _this.props.history.push('/home');}).catch(function(error){_this.setState({postLoading:false,error:true,error_response:error.response.data});if(error.response.data===\"not authorized\"){_this.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}});event.preventDefault();}else{alert(\"New Device Already Created!\");}};_this.handleChangeDevice=function(event){_this.setState({myDevice:_objectSpread(_objectSpread({},_this.state.myDevice),{},_defineProperty({},event.target.name,event.target.value))});};_this.state={myDevice:{id:\"0\",appliance_name:\"My Appliance\",device_state:0,device_battery:100.0},userDevices:[],applianceNames:[],disabled:false,loading:true,error:false,postLoading:false,redirect:null,revealDetails:false};return _this;}//Get users appliances, add the names to the select form element\n_createClass(addDevice,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axiosBaseURL.get(\"/devices\").then(function(result){_this2.setState({loading:false,usersDevices:result.data});var myList=[];var i;for(i in _this2.state.usersDevices){myList.push([_this2.state.usersDevices[i].appliance_name,_this2.state.usersDevices[i].id,_this2.state.usersDevices[i].device_battery,_this2.state.usersDevices[i].device_state]);}_this2.setState({applianceNames:myList});}).catch(function(error){_this2.setState({loading:false,error:true});if(error.response){_this2.setState({error_response:error.response.data});if(error.response.data===\"not authorized\"){_this2.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}}});}},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsx(\"div\",{className:\"m-5\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"There was an error\"})});}if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}var revealDetails=this.state.revealDetails;return/*#__PURE__*/_jsxs(\"div\",{className:\"m-5 text-light\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"New Device\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Appliance Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"appliance_name\",id:\"inputScoutName\",\"aria-describedby\":\"nameHelp\",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.postData,className:\"btn btn-success\",children:[\"Add this device\",/*#__PURE__*/_jsx(CircleSpinner,{size:20,color:\"#3BBCE5\",loading:this.state.postLoading})]})]}),revealDetails&&/*#__PURE__*/_jsx(Tile,{device_id:this.state.myDevice.id,device_battery:this.state.myDevice.device_battery,appliance_name:this.state.myDevice.appliance_name,state:this.state.myDevice.device_state,timestamp:this.state.myDevice.timestamp},this.state.myDevice.id)]});}}]);return addDevice;}(Component);export{addDevice as default};","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/addDevice.js"],"names":["React","Component","CircleSpinner","axiosBaseURL","Tile","addDevice","props","postData","event","setState","postLoading","state","myDevice","id","post","then","result","data","revealDetails","alert","history","push","catch","error","error_response","response","redirect","console","log","preventDefault","handleChangeDevice","target","name","value","appliance_name","device_state","device_battery","userDevices","applianceNames","disabled","loading","get","usersDevices","myList","i","timestamp"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {CircleSpinner} from 'react-spinners-kit' \nimport axiosBaseURL from '../axios.js'\nimport Tile from \"./tile.js\";\n\nexport default class addDevice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      myDevice: {\n         id: \"0\",\n\t\t   appliance_name: \"My Appliance\",\n         device_state: 0, \n         device_battery: 100.0,\n\t   },\n      userDevices: [],\n      applianceNames: [],\n      disabled: false,\n\t   loading: true,\n\t   error: false,\n\t   postLoading: false,\n      redirect: null, \n      revealDetails: false, \n    };\n  }\n\n   //Get users appliances, add the names to the select form element\n   componentDidMount() {\n      axiosBaseURL.get(\"/devices\")\n      .then((result) => {\n         this.setState({\n            loading: false,\n            usersDevices: result.data\n         });\n         var myList = [];\n         var i;\n         for(i in this.state.usersDevices) {\n            myList.push([this.state.usersDevices[i].appliance_name, this.state.usersDevices[i].id, this.state.usersDevices[i].device_battery, this.state.usersDevices[i].device_state])\n         }\n         this.setState({applianceNames: myList})\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         if(error.response){\n            this.setState({error_response: error.response.data});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         }\n      })\n   }\n\n   postData = (event) => {\n      this.setState({postLoading:true});\n      //if creating a new appliance post it first\n      if(this.state.myDevice.id === \"0\"){\n         axiosBaseURL.post('/device', this.state.myDevice)\n         .then((result) => {\n            this.setState({ myDevice: {...this.state.myDevice, id: result.data.id}, postLoading:false, revealDetails:true })\n            alert(\"Device Creation Successful!\");\n            return this.props.history.push('/home');\n         })\n         .catch((error) => {\n            this.setState({postLoading:false, error:true, error_response: error.response.data})\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         })\n         event.preventDefault();\n      }\n      else {alert(\"New Device Already Created!\")}\n   };\n\n   handleChangeDevice = (event) => {\n      this.setState({\n         myDevice : {...this.state.myDevice, [event.target.name]: event.target.value}\n      });\n   };\n\n\trender(){\n\t\tif(this.state.error){ \n         return(<div className=\"m-5\"><h3>There was an error</h3></div>) \n      }\n\t\tif(this.state.loading){\n         return (\n            <div className=\"d-flex justify-content-center m-5\">\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n            </div>)\n      }\n      const {revealDetails} = this.state;\n\t\treturn(\n<div className=\"m-5 text-light\">\n<h3>New Device</h3>\n<form>\n   <div className=\"form-group\">\n      <label>Appliance Name</label>\n      <input className=\"form-control\" name=\"appliance_name\" id=\"inputScoutName\" aria-describedby=\"nameHelp\" onChange={this.handleChangeDevice} value={this.state.myDevice.appliance_name} />\n   </div>\n\n   <button onClick={this.postData} className=\"btn btn-success\">Add this device<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.postLoading} /></button>\n</form>\n{revealDetails && (\n   <Tile key={this.state.myDevice.id} device_id={this.state.myDevice.id} device_battery={this.state.myDevice.device_battery} appliance_name={this.state.myDevice.appliance_name} state={this.state.myDevice.device_state} timestamp={this.state.myDevice.timestamp}></Tile>\n)}\n</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}