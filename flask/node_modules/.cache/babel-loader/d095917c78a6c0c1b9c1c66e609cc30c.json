{"ast":null,"code":"import _defineProperty from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{CircleSpinner}from'react-spinners-kit';import axiosBaseURL from'../axios.js';import{Redirect}from'react-router-dom';var dbString;var editDevice=/*#__PURE__*/function(_Component){_inherits(editDevice,_Component);var _super=_createSuper(editDevice);function editDevice(props){var _this;_classCallCheck(this,editDevice);_this=_super.call(this,props);_this.updateDevice=function(event){_this.setState({loading:true});axiosBaseURL.patch(dbString,_this.state.myDevice).then(function(result){_this.setState({loading:false});alert(\"Device Updated Successfully!\");_this.props.history.push('/home');}).catch(function(error){_this.setState({loading:false,error:true});if(error.response.data){console.log(error.response);}});event.preventDefault();};_this.deleteDevice=function(event){var r=window.confirm(\"Do you really want to delete this, it will be permanent!\");if(r===true){axiosBaseURL.delete(dbString).then(function(result){_this.setState({redirect:'/home',loading:false});alert(\"Device Removed Successfully!\");_this.props.history.push('/home');}).catch(function(error){_this.setState({error:true});if(error.response){console.log(error.response);_this.setState({error_response:error.response.data});}});event.preventDefault();}};_this.handleChangeDevice=function(event){_this.setState({myDevice:_objectSpread(_objectSpread({},_this.state.myDevice),{},_defineProperty({},event.target.name,event.target.value))});};_this.state={myDevice:{appliance_name:\"My Appliance\",device_state:1,device_battery:100.0,//timestamp: \"2019-04-30T08:59:00.000Z\",\nid:1},loading:true,error:false};return _this;}_createClass(editDevice,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var handle=this.props.match.params.handle;dbString=\"/device/\"+handle;axiosBaseURL.get(dbString).then(function(result){_this2.setState({myDevice:{id:result.data.id,appliance_name:result.data.appliance_name,device_state:result.data.device_state,device_battery:result.data.device_battery//timestamp: result.data.timestamp\n},loading:false});}).catch(function(error){_this2.setState({loading:false,error:true});if(error.response){_this2.setState({error_response:error.response.data});if(error.response.data===\"not authorized\"){_this2.setState({redirect:dbString});}else if(error.response.data){console.log(error.response);}}});}},{key:\"render\",value:function render(){if(this.state.error){if(this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:this.state.redirect});}return/*#__PURE__*/_jsx(\"div\",{className:\"m-5\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"There was an error\"})});}if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"m-5 text-light\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Device\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Appliance Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control text-light\",name:\"appliance_name\",id:\"inputDeviceName\",\"aria-describedby\":\"nameHelp\",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.updateDevice,className:\"btn btn-success\",children:[\"Update\",/*#__PURE__*/_jsx(CircleSpinner,{size:20,color:\"#3BBCE5\",loading:this.state.loading})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.deleteDevice,className:\"btn btn-danger\",children:[\"Delete\",/*#__PURE__*/_jsx(CircleSpinner,{size:20,color:\"#3BBCE5\",loading:this.state.loading})]})]})]});}}]);return editDevice;}(Component);export{editDevice as default};","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/editDevice.js"],"names":["React","Component","CircleSpinner","axiosBaseURL","Redirect","dbString","editDevice","props","updateDevice","event","setState","loading","patch","state","myDevice","then","result","alert","history","push","catch","error","response","data","console","log","preventDefault","deleteDevice","r","window","confirm","delete","redirect","error_response","handleChangeDevice","target","name","value","appliance_name","device_state","device_battery","id","handle","match","params","get"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {CircleSpinner} from 'react-spinners-kit' ;\nimport axiosBaseURL from '../axios.js';\nimport { Redirect } from 'react-router-dom';\n\nvar dbString\n\nexport default class editDevice extends Component {\n   constructor(props) {\n     super(props);\n     this.state = {\n         myDevice: {\n            appliance_name: \"My Appliance\",\n            device_state: 1, \n            device_battery: 100.0,\n            //timestamp: \"2019-04-30T08:59:00.000Z\",\n            id: 1,\n         },\n\t   loading: true,\n\t   error: false,\n      }\n   };\n   componentDidMount() {\n      const handle = this.props.match.params.handle;\n\t\tdbString = \"/device/\" + handle\n\t\taxiosBaseURL.get(dbString)\n\t\t.then((result) => {\n\t\t\tthis.setState({ \n\t\t\t\tmyDevice: {\n\t\t\t\t\tid: result.data.id, \n\t\t\t\t\tappliance_name: result.data.appliance_name, \n\t\t\t\t\tdevice_state: result.data.device_state, \n\t\t\t\t\tdevice_battery: result.data.device_battery, \n\t\t\t\t\t//timestamp: result.data.timestamp\n            },\n            loading: false\n\t\t\t});\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         if(error.response){\n            this.setState({error_response: error.response.data});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: dbString}) }\n            else if (error.response.data){console.log(error.response)}\n         }\n      })\n   }\n\n   updateDevice = (event) => {\n      this.setState({loading:true});\n      axiosBaseURL.patch(dbString, this.state.myDevice)\n      .then((result) => {\n         this.setState({loading: false});\n            alert(\"Device Updated Successfully!\")\n            this.props.history.push('/home');\n      })\n      .catch((error)=>{\n         this.setState({loading:false, error:true})\n         if(error.response.data){console.log(error.response)}\n      })\n\t   event.preventDefault();\n   };\n\n   deleteDevice = (event) => {\n      const r = window.confirm(\"Do you really want to delete this, it will be permanent!\");\n      if(r === true){\n         axiosBaseURL.delete(dbString)\n         .then((result) => {\n            this.setState({redirect: '/home', loading: false});\n            alert(\"Device Removed Successfully!\");\n            this.props.history.push('/home');\n         })\n         .catch((error) => {\n            this.setState({ error: true });\n            if(error.response){\n               console.log(error.response)\n               this.setState({error_response: error.response.data})\n            }\n         })\n         event.preventDefault();\n      }\n   };\n   handleChangeDevice = (event) => { \n      this.setState({\n         myDevice : {...this.state.myDevice, [event.target.name]: event.target.value}\n      });\n   };\n\n\trender(){\n\t\tif(this.state.error) {\n         if(this.state.redirect) {return <Redirect to={this.state.redirect} />}\n         return(<div className=\"m-5\"><h3>There was an error</h3></div>) \n      }\n\t\tif(this.state.loading){\n         return (\n            <div className=\"d-flex justify-content-center m-5\">\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n            </div>)\n\t\t}\n\t\treturn(\n<div className=\"m-5 text-light\">\n<h3>Edit Device</h3>\n<form>\n   <div className=\"form-group\">\n      <label>Appliance Name</label>\n      <input className=\"form-control text-light\" name=\"appliance_name\" id=\"inputDeviceName\" aria-describedby=\"nameHelp\" onChange={this.handleChangeDevice} value={this.state.myDevice.appliance_name} />\n   </div>\n\n   <button onClick={this.updateDevice} className=\"btn btn-success\">Update<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.loading} /></button>\n   <button onClick={this.deleteDevice} className=\"btn btn-danger\">Delete<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.loading} /></button>\n</form>\n</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}