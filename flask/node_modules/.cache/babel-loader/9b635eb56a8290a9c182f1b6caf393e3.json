{"ast":null,"code":"import _classCallCheck from\"/home/ec2-user/capstone/flask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ec2-user/capstone/flask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ec2-user/capstone/flask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ec2-user/capstone/flask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import{CircleSpinner}from'react-spinners-kit';import axiosBaseURL from'../axios.js';import CsvDownload from'react-json-to-csv';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var batteryLogs=/*#__PURE__*/function(_Component){_inherits(batteryLogs,_Component);var _super=_createSuper(batteryLogs);function batteryLogs(props){var _this;_classCallCheck(this,batteryLogs);_this=_super.call(this,props);_this.state={battery:[{device_battery:100.0,timestamp_time:\"\"}],error:false,loading:true};return _this;}_createClass(batteryLogs,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var handle=this.props.match.params.handle;var dbString=\"/batteryLogs/\"+handle;axiosBaseURL.get(dbString).then(function(result){_this2.setState({battery:result.data});_this2.setState({loading:false});});}},{key:\"render\",value:function render(){if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}if(this.state.error){if(this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:this.state.redirect});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"There was an error\"}),/*#__PURE__*/_jsx(\"h3\",{children:this.state.error_response})]});}return/*#__PURE__*/_jsxs(React.Fragment,{children:[this.state.battery.map(function(battery){return/*#__PURE__*/_jsx(\"div\",{className:\"col mt-3 text-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Battery: \",battery.device_battery,\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Last Seen: \",battery.timestamp_time]})]})})});}),/*#__PURE__*/_jsx(CsvDownload,{style:{display:\"flex\",margin:\"1em\"},className:\"btn btn-info float-right footer affix\",data:this.state.battery,children:\"Download CSV\"})]});}}]);return batteryLogs;}(Component);export{batteryLogs as default};","map":{"version":3,"sources":["/home/ec2-user/capstone/flask/src/components/logs.js"],"names":["React","Component","Redirect","CircleSpinner","axiosBaseURL","CsvDownload","batteryLogs","props","state","battery","device_battery","timestamp_time","error","loading","handle","match","params","dbString","get","then","result","setState","data","redirect","error_response","map","display","margin"],"mappings":"gkBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAASC,QAAT,KAAwB,kBAAxB,CACA,OAAQC,aAAR,KAA4B,oBAA5B,CACA,MAAOC,CAAAA,YAAP,KAAyB,aAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,C,2FAEqBC,CAAAA,W,0GACpB,qBAAYC,KAAZ,CAAmB,6CAClB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACZC,OAAO,CAAE,CACI,CAACC,cAAc,CAAE,KAAjB,CAAwBC,cAAc,CAAE,EAAxC,CADJ,CADG,CAIbC,KAAK,CAAE,KAJM,CAKbC,OAAO,CAAE,IALI,CAAb,CAFkB,aASlB,C,yDACD,4BAAoB,iBACnB,GAAMC,CAAAA,MAAM,CAAG,KAAKP,KAAL,CAAWQ,KAAX,CAAiBC,MAAjB,CAAwBF,MAAvC,CACA,GAAIG,CAAAA,QAAQ,CAAG,gBAAkBH,MAAjC,CACAV,YAAY,CAACc,GAAb,CAAiBD,QAAjB,EACCE,IADD,CACM,SAACC,MAAD,CAAY,CACjB,MAAI,CAACC,QAAL,CAAc,CACbZ,OAAO,CAAEW,MAAM,CAACE,IADH,CAAd,EAGA,MAAI,CAACD,QAAL,CAAc,CAACR,OAAO,CAAE,KAAV,CAAd,EACA,CAND,EAOA,C,sBACD,iBAAS,CACR,GAAG,KAAKL,KAAL,CAAWK,OAAd,CAAuB,CACtB,mBACE,YAAK,SAAS,CAAC,mCAAf,uBACA,KAAC,aAAD,EAAe,IAAI,CAAE,EAArB,CAAyB,KAAK,CAAC,SAA/B,CAAyC,OAAO,CAAE,KAAKL,KAAL,CAAWK,OAA7D,EADA,EADF,CAIA,CACD,GAAG,KAAKL,KAAL,CAAWI,KAAd,CAAqB,CACpB,GAAG,KAAKJ,KAAL,CAAWe,QAAd,CAAwB,CAAC,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,KAAKf,KAAL,CAAWe,QAAzB,EAAP,CAA6C,CACtE,mBAAO,oCAAK,0CAAL,cAAgC,oBAAK,KAAKf,KAAL,CAAWgB,cAAhB,EAAhC,GAAP,CACC,CACF,mBACC,MAAC,KAAD,CAAO,QAAP,YACE,KAAKhB,KAAL,CAAWC,OAAX,CAAmBgB,GAAnB,CAAuB,SAAChB,OAAD,qBACvB,YAAK,SAAS,CAAC,qBAAf,uBACA,YAAK,SAAS,CAAC,cAAf,uBACC,aAAK,SAAS,CAAC,WAAf,wBACE,WAAG,SAAS,CAAC,WAAb,uBAAmCA,OAAO,CAACC,cAA3C,OADF,cAEE,WAAG,SAAS,CAAC,WAAb,yBAAqCD,OAAO,CAACE,cAA7C,GAFF,GADD,EADA,EADuB,EAAvB,CADF,cAWC,KAAC,WAAD,EAAa,KAAK,CAAE,CAACe,OAAO,CAAE,MAAV,CAAkBC,MAAM,CAAE,KAA1B,CAApB,CAAsD,SAAS,CAAC,uCAAhE,CAAwG,IAAI,CAAE,KAAKnB,KAAL,CAAWC,OAAzH,0BAXD,GADD,CAeA,C,yBAhDuCR,S,SAApBK,W","sourcesContent":["import React, {Component} from 'react';\r\nimport { Redirect} from 'react-router-dom';\r\nimport {CircleSpinner} from 'react-spinners-kit';\r\nimport axiosBaseURL from '../axios.js';\r\nimport CsvDownload from 'react-json-to-csv';\r\n\r\nexport default class batteryLogs extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\t\r\n\t\t\tbattery: [\r\n                {device_battery: 100.0, timestamp_time: \"\"}\r\n            ],\r\n\t\terror: false,\r\n\t\tloading: true\r\n\t\t}\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tconst handle = this.props.match.params.handle;\r\n\t\tvar dbString = \"/batteryLogs/\" + handle\r\n\t\taxiosBaseURL.get(dbString)\r\n\t\t.then((result) => {\r\n\t\t\tthis.setState({ \r\n\t\t\t\tbattery: result.data\r\n\t\t\t});\r\n\t\t\tthis.setState({loading: false})\r\n\t\t})\r\n\t};\r\n\trender() {\r\n\t\tif(this.state.loading) {\r\n\t\t\treturn (\r\n\t\t\t  <div className=\"d-flex justify-content-center m-5\">\r\n\t\t\t\t <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\r\n\t\t\t  </div>)\r\n\t\t}\r\n\t\tif(this.state.error) {\r\n\t\t\tif(this.state.redirect) {return <Redirect to={this.state.redirect} />}\r\n\t\t\treturn(<div><h3>There was an error</h3><h3>{this.state.error_response}</h3></div>)\r\n\t\t }\r\n\t\treturn(\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t{this.state.battery.map((battery) => (\r\n\t\t\t\t\t<div className=\"col mt-3 text-light\">\r\n\t\t\t\t\t<div className=\"card bg-dark\">\r\n\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t<p className=\"card-text\">Battery: {battery.device_battery}%</p>\r\n\t\t\t\t\t\t\t\t<p className=\"card-text\">Last Seen: {battery.timestamp_time}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t\t<CsvDownload style={{display: \"flex\", margin: \"1em\"}} className=\"btn btn-info float-right footer affix\" data={this.state.battery}>Download CSV</CsvDownload>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}