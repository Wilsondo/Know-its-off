{"ast":null,"code":"import _classCallCheck from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{Link,Redirect}from'react-router-dom';import{CircleSpinner}from'react-spinners-kit';import axiosBaseURL from'../axios.js';var Devices=/*#__PURE__*/function(_Component){_inherits(Devices,_Component);var _super=_createSuper(Devices);function Devices(props){var _this;_classCallCheck(this,Devices);_this=_super.call(this,props);_this.state={myDevice:{appliance_name:\"\",device_state:1,device_battery:100.0,timestamp:\"\",id:1},error:false,loading:true};return _this;}_createClass(Devices,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var handle=this.props.match.params.handle;var dbString=\"/device/\"+handle;axiosBaseURL.get(dbString).then(function(result){_this2.setState({myDevice:{id:result.data.id,appliance_name:result.data.appliance_name,device_state:result.data.device_state,device_battery:result.data.device_battery,timestamp:result.data.timestamp}});_this2.setState({loading:false});}).catch(function(error){_this2.setState({error:true,loading:false});if(error.response.data===\"not authorized\"){_this2.setState({redirect:\"/home\"});}else if(error.response.data){console.log(error.response);}});}},{key:\"render\",value:function render(){if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}if(this.state.error){if(this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:this.state.redirect});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"There was an error\"}),/*#__PURE__*/_jsx(\"h3\",{children:this.state.error_response})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"col mt-3 text-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card bg-dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title text-wrap\",children:this.state.myDevice.appliance_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"State: \",this.state.myDevice.device_state?'ON':'OFF']}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Battery: \",this.state.myDevice.device_battery,\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"Last Seen: \",this.state.myDevice.timestamp]}),/*#__PURE__*/_jsx(Link,{to:\"/device/\"+this.state.myDevice.id+\"/edit\",className:\"btn btn-primary text-wrap\",children:\"Modify device details\"})]})})});}}]);return Devices;}(Component);export{Devices as default};","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/device.js"],"names":["React","Component","Link","Redirect","CircleSpinner","axiosBaseURL","Devices","props","state","myDevice","appliance_name","device_state","device_battery","timestamp","id","error","loading","handle","match","params","dbString","get","then","result","setState","data","catch","response","redirect","console","log","error_response"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Link, Redirect} from 'react-router-dom';\nimport {CircleSpinner} from 'react-spinners-kit';\nimport axiosBaseURL from '../axios.js';\n\n\nexport default class Devices extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\t\n\t\t\tmyDevice: {\n\t\t\t\tappliance_name: \"\",\n\t\t\t\tdevice_state: 1, \n\t\t\t\tdevice_battery: 100.0,\n\t\t\t\ttimestamp: \"\",\n\t\t\t\tid: 1\n\t\t\t},\n\t\terror: false,\n\t\tloading: true\n\t\t}\n\t};\n\tcomponentDidMount() {\n\t\tconst handle = this.props.match.params.handle;\n\t\tvar dbString = \"/device/\" + handle\n\t\taxiosBaseURL.get(dbString)\n\t\t.then((result) => {\n\t\t\tthis.setState({ \n\t\t\t\tmyDevice: {\n\t\t\t\t\tid: result.data.id, \n\t\t\t\t\tappliance_name: result.data.appliance_name, \n\t\t\t\t\tdevice_state: result.data.device_state, \n\t\t\t\t\tdevice_battery: result.data.device_battery, \n\t\t\t\t\ttimestamp: result.data.timestamp\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setState({loading: false})\n\t\t})\n\t\t.catch( (error) => {\n\t\t\tthis.setState({error: true, loading:false});\n\t\t\tif(error.response.data === \"not authorized\"){ this.setState({redirect: \"/home\"}) }\n            else if (error.response.data){console.log(error.response)}\n\t\t})\n\t};\n\trender() {\n\t\tif(this.state.loading) {\n\t\t\treturn (\n\t\t\t  <div className=\"d-flex justify-content-center m-5\">\n\t\t\t\t <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n\t\t\t  </div>)\n\t\t}\n\t\tif(this.state.error) {\n\t\t\tif(this.state.redirect) {return <Redirect to={this.state.redirect} />}\n\t\t\treturn(<div><h3>There was an error</h3><h3>{this.state.error_response}</h3></div>)\n\t\t }\n\t\treturn(\n\t\t\t<div className=\"col mt-3 text-light\">\n\t\t\t<div className=\"card bg-dark\">\n  \t\t\t\t<div className=\"card-body\">\n    \t\t\t\t\t<h5 className=\"card-title text-wrap\">{this.state.myDevice.appliance_name}</h5>\n    \t\t\t\t\t<p className=\"card-text\">State: {this.state.myDevice.device_state ? 'ON' : 'OFF'}</p>\n    \t\t\t\t\t<p className=\"card-text\">Battery: {this.state.myDevice.device_battery}%</p>\n\t\t\t\t\t\t<p className=\"card-text\">Last Seen: {this.state.myDevice.timestamp}</p>\n    \t\t\t\t\t<Link to={\"/device/\" + this.state.myDevice.id + \"/edit\"} className=\"btn btn-primary text-wrap\">Modify device details</Link>\n  \t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}