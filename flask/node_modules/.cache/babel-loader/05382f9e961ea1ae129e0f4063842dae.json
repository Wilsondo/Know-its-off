{"ast":null,"code":"import _defineProperty from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{CircleSpinner}from'react-spinners-kit';import axiosBaseURL from'../axios.js';import{Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var editDevice=/*#__PURE__*/function(_Component){_inherits(editDevice,_Component);var _super=_createSuper(editDevice);function editDevice(props){var _this;_classCallCheck(this,editDevice);_this=_super.call(this,props);_this.updateDevice=function(event){_this.setState({loading:true});axiosBaseURL.get(\"/allDevices\").then(function(result){_this.setState({allDevices:result.data});});var idVerify=true;for(var x=0;x<_this.state.allDevices.length;x++){if(_this.state.myDevice.id===_this.state.allDevices[x].id){idVerify=false;}}if(idVerify){axiosBaseURL.patch(dbString,_this.state.myDevice).then(function(result){_this.setState({loading:false});alert(\"Device Updated Successfully!\");_this.props.history.push('/home');}).catch(function(error){_this.setState({loading:false});alert(\"Please enter a valid Device ID!\");});}else{_this.setState({loading:false});alert(\"Please enter a valid Device ID!\");}event.preventDefault();};_this.handleChangeDevice=function(event){_this.setState({myDevice:_objectSpread(_objectSpread({},_this.state.myDevice),{},_defineProperty({},event.target.name,event.target.value))});};_this.state={myDevice:{appliance_name:\"My Appliance\",device_state:1,device_battery:100.0,//timestamp: \"2019-04-30T08:59:00.000Z\",\nid:1},allDevices:[],loading:true,error:false};return _this;}_createClass(editDevice,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var handle=this.props.match.params.handle;dbString=\"/device/\"+handle;axiosBaseURL.get(dbString).then(function(result){_this2.setState({myDevice:{id:result.data.id,appliance_name:result.data.appliance_name,device_state:result.data.device_state,device_battery:result.data.device_battery},loading:false});}).catch(function(error){_this2.setState({loading:false,error:true});if(error.response){_this2.setState({error_response:error.response.data});if(error.response.data===\"not authorized\"){_this2.setState({redirect:dbString});}else if(error.response.data){console.log(error.response);}}});}},{key:\"render\",value:function render(){if(this.state.error){if(this.state.redirect){return/*#__PURE__*/_jsx(Redirect,{to:this.state.redirect});}return/*#__PURE__*/_jsx(\"div\",{className:\"m-5\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"There was an error\"})});}if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"m-5 text-light\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Device\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Appliance Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control text-dark\",name:\"appliance_name\",id:\"inputApplianceName\",\"aria-describedby\":\"nameHelp\",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name}),/*#__PURE__*/_jsx(\"label\",{children:\"Device ID\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control text-dark\",name:\"id\",id:\"inputDeviceId\",\"aria-describedby\":\"nameHelp\",onChange:this.handleChangeDevice,value:this.state.myDevice.id})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.updateDevice,className:\"btn btn-success\",children:[\"Update\",/*#__PURE__*/_jsx(CircleSpinner,{size:20,color:\"#3BBCE5\",loading:this.state.loading})]})]})]});}}]);return editDevice;}(Component);export{editDevice as default};","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/editDevice.js"],"names":["React","Component","CircleSpinner","axiosBaseURL","Redirect","editDevice","props","updateDevice","event","setState","loading","get","then","result","allDevices","data","idVerify","x","state","length","myDevice","id","patch","dbString","alert","history","push","catch","error","preventDefault","handleChangeDevice","target","name","value","appliance_name","device_state","device_battery","handle","match","params","response","error_response","redirect","console","log"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {CircleSpinner} from 'react-spinners-kit' ;\nimport axiosBaseURL from '../axios.js';\nimport { Redirect } from 'react-router-dom';\n\nexport default class editDevice extends Component {\n   constructor(props) {\n     super(props);\n     this.state = {\n         myDevice: {\n            appliance_name: \"My Appliance\",\n            device_state: 1, \n            device_battery: 100.0,\n            //timestamp: \"2019-04-30T08:59:00.000Z\",\n            id: 1,\n         },\n         allDevices: [],\n\t      loading: true,\n\t      error: false,\n      }\n   };\n   componentDidMount() {\n      const handle = this.props.match.params.handle;\n\t\tdbString = \"/device/\" + handle\n\t\taxiosBaseURL.get(dbString)\n\t\t.then((result) => {\n\t\t\tthis.setState({ \n\t\t\t\tmyDevice: {\n\t\t\t\t\tid: result.data.id, \n\t\t\t\t\tappliance_name: result.data.appliance_name, \n\t\t\t\t\tdevice_state: result.data.device_state, \n\t\t\t\t\tdevice_battery: result.data.device_battery, \n            },\n            loading: false\n\t\t\t});\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         if(error.response){\n            this.setState({error_response: error.response.data});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: dbString}) }\n            else if (error.response.data){console.log(error.response)}\n         }\n      })\n   }\n   \n   updateDevice = (event) => {\n      this.setState({loading:true});\n      axiosBaseURL.get(\"/allDevices\")\n      .then((result) => {\n         this.setState({\n            allDevices: result.data\n         })\n      })\n      let idVerify = true;\n      for(var x = 0;x < this.state.allDevices.length; x++)\n         if(this.state.myDevice.id === this.state.allDevices[x].id){\n            idVerify = false;\n         }\n      if(idVerify) {\n         axiosBaseURL.patch(dbString, this.state.myDevice)\n         .then((result) => {\n            this.setState({loading: false});\n               alert(\"Device Updated Successfully!\");\n               this.props.history.push('/home');\n         })\n         .catch((error)=>{\n            this.setState({loading:false})\n            alert(\"Please enter a valid Device ID!\");\n         })\n      }\n      else {\n         this.setState({loading:false})\n         alert(\"Please enter a valid Device ID!\");\n      }\n\t   event.preventDefault();\n   };\n\n\n   handleChangeDevice = (event) => { \n      this.setState({\n         myDevice : {...this.state.myDevice, [event.target.name]: event.target.value}\n      });\n   };\n\n\trender(){\n\t\tif(this.state.error) {\n         if(this.state.redirect) {return <Redirect to={this.state.redirect} />}\n         return(<div className=\"m-5\"><h3>There was an error</h3></div>) \n      }\n\t\tif(this.state.loading){\n         return (\n            <div className=\"d-flex justify-content-center m-5\">\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n            </div>)\n\t\t}\n\t\treturn(\n<div className=\"m-5 text-light\">\n<h3>Edit Device</h3>\n<form>\n   <div className=\"form-group\">\n      <label>Appliance Name</label>\n      <input className=\"form-control text-dark\" name=\"appliance_name\" id=\"inputApplianceName\" aria-describedby=\"nameHelp\" onChange={this.handleChangeDevice} value={this.state.myDevice.appliance_name} />\n      <label>Device ID</label>\n      <input className=\"form-control text-dark\" name=\"id\" id=\"inputDeviceId\" aria-describedby=\"nameHelp\" onChange={this.handleChangeDevice} value={this.state.myDevice.id} />\n   </div>\n\n   <button onClick={this.updateDevice} className=\"btn btn-success\">Update<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.loading} /></button>\n</form>\n</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}