{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/mnt/e/MyReact/new_frontend/src/components/grid/GridContext.js\";\nimport React, { Component, createContext } from \"react\";\nimport Cookies from 'js-cookie'; //import { GridContextProvider } from \"react-grid-dnd\";\n// Helper functions\n\nfunction move(array, oldIndex, newIndex) {\n  if (newIndex >= array.length) {\n    newIndex = array.length - 1;\n  }\n\n  array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n  return array;\n}\n\nfunction moveElement(array, index, offset) {\n  const newIndex = index + offset;\n  return move(array, index, newIndex);\n}\n\nfunction findIndexofItems(i, items_copy, cookie_items) {\n  return items_copy.findIndex(item => item.id === cookie_items[i].id);\n} // Context\n\n\nconst GridContext = /*#__PURE__*/createContext({\n  items: []\n});\nexport class GridProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setItems = items => {\n      if (!Cookies.get('idList') && items) {\n        this.setState({\n          items\n        });\n      } else {\n        var i, j;\n        var items_copy = items.slice(); //retreive cookie\n\n        var cookie_idList = JSON.parse(Cookies.get('idList'));\n        var myArr = []; //reorder items based on cookie_idList\n\n        for (i in cookie_idList) {\n          for (j in items_copy) {\n            const itemID = items_copy[j].id;\n            const cookieID = cookie_idList[i];\n\n            if (itemID === cookieID) {\n              myArr.push(items_copy[j]);\n              items_copy.splice(j, 1);\n            }\n          }\n        }\n      }\n\n      for (i in items_copy) {\n        myArr.push(items_copy[i]);\n      }\n\n      if (myArr) {\n        this.setState({\n          items: myArr\n        });\n      }\n    };\n\n    this.moveItem = (sourceId, destinationId) => {\n      const sourceIndex = this.state.items.findIndex(item => item.id === sourceId);\n      const destinationIndex = this.state.items.findIndex(item => item.id === destinationId); // If source/destination is unknown, do nothing.\n\n      if (sourceId === -1 || destinationId === -1) {\n        return;\n      }\n\n      const offset = destinationIndex - sourceIndex;\n      this.setState(state => ({\n        items: moveElement(state.items, sourceIndex, offset)\n      })); //store items in cookie\n\n      var i;\n      var idList = [];\n\n      for (i in this.state.items) {\n        idList.push(this.state.items[i].id);\n      }\n\n      Cookies.set('idList', idList);\n    };\n\n    this.state = {\n      items: [],\n      moveItem: this.moveItem,\n      setItems: this.setItems\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(GridContext.Provider, {\n      value: this.state,\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default GridContext;","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/grid/GridContext.js"],"names":["React","Component","createContext","Cookies","move","array","oldIndex","newIndex","length","splice","moveElement","index","offset","findIndexofItems","i","items_copy","cookie_items","findIndex","item","id","GridContext","items","GridProvider","constructor","props","setItems","get","setState","j","slice","cookie_idList","JSON","parse","myArr","itemID","cookieID","push","moveItem","sourceId","destinationId","sourceIndex","state","destinationIndex","idList","set","render","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,aAA3B,QAAgD,OAAhD;AACA,OAAOC,OAAP,MAAoB,WAApB,C,CAEA;AAEA;;AAEA,SAASC,IAAT,CAAcC,KAAd,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AACvC,MAAIA,QAAQ,IAAIF,KAAK,CAACG,MAAtB,EAA8B;AAC5BD,IAAAA,QAAQ,GAAGF,KAAK,CAACG,MAAN,GAAe,CAA1B;AACD;;AACDH,EAAAA,KAAK,CAACI,MAAN,CAAaF,QAAb,EAAuB,CAAvB,EAA0BF,KAAK,CAACI,MAAN,CAAaH,QAAb,EAAuB,CAAvB,EAA0B,CAA1B,CAA1B;AACA,SAAOD,KAAP;AACD;;AAED,SAASK,WAAT,CAAqBL,KAArB,EAA4BM,KAA5B,EAAmCC,MAAnC,EAA2C;AACzC,QAAML,QAAQ,GAAGI,KAAK,GAAGC,MAAzB;AAEA,SAAOR,IAAI,CAACC,KAAD,EAAQM,KAAR,EAAeJ,QAAf,CAAX;AACD;;AAED,SAASM,gBAAT,CAA0BC,CAA1B,EAA6BC,UAA7B,EAAyCC,YAAzC,EAAuD;AACrD,SAAOD,UAAU,CAACE,SAAX,CAAqBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYH,YAAY,CAACF,CAAD,CAAZ,CAAgBK,EAAzD,CAAP;AACD,C,CAED;;;AAEA,MAAMC,WAAW,gBAAGlB,aAAa,CAAC;AAAEmB,EAAAA,KAAK,EAAE;AAAT,CAAD,CAAjC;AAEA,OAAO,MAAMC,YAAN,SAA2BrB,SAA3B,CAAqC;AAC1CsB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAiBnBC,QAjBmB,GAiBRJ,KAAK,IAAI;AAClB,UAAG,CAAClB,OAAO,CAACuB,GAAR,CAAY,QAAZ,CAAD,IAA0BL,KAA7B,EAAmC;AACjC,aAAKM,QAAL,CAAc;AAACN,UAAAA;AAAD,SAAd;AACD,OAFD,MAGI;AACF,YAAIP,CAAJ,EAAOc,CAAP;AACA,YAAIb,UAAU,GAAGM,KAAK,CAACQ,KAAN,EAAjB,CAFE,CAGF;;AACA,YAAIC,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAW7B,OAAO,CAACuB,GAAR,CAAY,QAAZ,CAAX,CAApB;AACA,YAAIO,KAAK,GAAG,EAAZ,CALE,CAMF;;AACA,aAAInB,CAAJ,IAASgB,aAAT,EAAuB;AACpB,eAAIF,CAAJ,IAASb,UAAT,EAAoB;AACjB,kBAAMmB,MAAM,GAAGnB,UAAU,CAACa,CAAD,CAAV,CAAcT,EAA7B;AACA,kBAAMgB,QAAQ,GAAGL,aAAa,CAAChB,CAAD,CAA9B;;AACA,gBAAGoB,MAAM,KAAKC,QAAd,EAAuB;AACpBF,cAAAA,KAAK,CAACG,IAAN,CAAWrB,UAAU,CAACa,CAAD,CAArB;AACAb,cAAAA,UAAU,CAACN,MAAX,CAAkBmB,CAAlB,EAAoB,CAApB;AACF;AACF;AACF;AACF;;AACD,WAAId,CAAJ,IAASC,UAAT,EAAoB;AAACkB,QAAAA,KAAK,CAACG,IAAN,CAAWrB,UAAU,CAACD,CAAD,CAArB;AAA0B;;AAC/C,UAAGmB,KAAH,EAAS;AACN,aAAKN,QAAL,CAAc;AAACN,UAAAA,KAAK,EAAEY;AAAR,SAAd;AACF;AACJ,KA3CkB;;AAAA,SA6CnBI,QA7CmB,GA6CR,CAACC,QAAD,EAAWC,aAAX,KAA6B;AACtC,YAAMC,WAAW,GAAG,KAAKC,KAAL,CAAWpB,KAAX,CAAiBJ,SAAjB,CAClBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYmB,QADF,CAApB;AAGA,YAAMI,gBAAgB,GAAG,KAAKD,KAAL,CAAWpB,KAAX,CAAiBJ,SAAjB,CACvBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYoB,aADG,CAAzB,CAJsC,CAQtC;;AACA,UAAID,QAAQ,KAAK,CAAC,CAAd,IAAmBC,aAAa,KAAK,CAAC,CAA1C,EAA6C;AAC3C;AACD;;AAED,YAAM3B,MAAM,GAAG8B,gBAAgB,GAAGF,WAAlC;AAEA,WAAKb,QAAL,CAAcc,KAAK,KAAK;AACtBpB,QAAAA,KAAK,EAAEX,WAAW,CAAC+B,KAAK,CAACpB,KAAP,EAAcmB,WAAd,EAA2B5B,MAA3B;AADI,OAAL,CAAnB,EAfsC,CAmBtC;;AACA,UAAIE,CAAJ;AACA,UAAI6B,MAAM,GAAG,EAAb;;AACA,WAAI7B,CAAJ,IAAS,KAAK2B,KAAL,CAAWpB,KAApB,EAA0B;AACvBsB,QAAAA,MAAM,CAACP,IAAP,CAAY,KAAKK,KAAL,CAAWpB,KAAX,CAAiBP,CAAjB,EAAoBK,EAAhC;AACF;;AACDhB,MAAAA,OAAO,CAACyC,GAAR,CAAY,QAAZ,EAAsBD,MAAtB;AACD,KAvEkB;;AAEjB,SAAKF,KAAL,GAAa;AACXpB,MAAAA,KAAK,EAAE,EADI;AAEXgB,MAAAA,QAAQ,EAAE,KAAKA,QAFJ;AAGXZ,MAAAA,QAAQ,EAAE,KAAKA;AAHJ,KAAb;AAKD;;AAEDoB,EAAAA,MAAM,GAAG;AACP,wBACE,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAE,KAAKJ,KAAlC;AAAA,gBACG,KAAKjB,KAAL,CAAWsB;AADd;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;;AAhByC;AA2E5C,eAAe1B,WAAf","sourcesContent":["import React, { Component, createContext } from \"react\";\nimport Cookies from 'js-cookie';\n\n//import { GridContextProvider } from \"react-grid-dnd\";\n\n// Helper functions\n\nfunction move(array, oldIndex, newIndex) {\n  if (newIndex >= array.length) {\n    newIndex = array.length - 1;\n  }\n  array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n  return array;\n}\n\nfunction moveElement(array, index, offset) {\n  const newIndex = index + offset;\n\n  return move(array, index, newIndex);\n}\n\nfunction findIndexofItems(i, items_copy, cookie_items) {\n  return items_copy.findIndex(item => item.id === cookie_items[i].id) \n}\n\n// Context\n\nconst GridContext = createContext({ items: [] });\n\nexport class GridProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      moveItem: this.moveItem,\n      setItems: this.setItems\n    };\n  }\n\n  render() {\n    return (\n      <GridContext.Provider value={this.state}>\n        {this.props.children}\n      </GridContext.Provider>\n    );\n  }\n\n  setItems = items => {\n    if(!Cookies.get('idList') && items){\n      this.setState({items})\n    }\n    else{\n      var i, j\n      var items_copy = items.slice()\n      //retreive cookie\n      var cookie_idList = JSON.parse(Cookies.get('idList'));\n      var myArr = []\n      //reorder items based on cookie_idList\n      for(i in cookie_idList){\n         for(j in items_copy){\n            const itemID = items_copy[j].id\n            const cookieID = cookie_idList[i]\n            if(itemID === cookieID){\n               myArr.push(items_copy[j])\n               items_copy.splice(j,1)\n            }\n          }\n        }\n      }\n      for(i in items_copy){myArr.push(items_copy[i])}\n      if(myArr){\n         this.setState({items: myArr})\n      }\n  };\n\n  moveItem = (sourceId, destinationId) => {\n    const sourceIndex = this.state.items.findIndex(\n      item => item.id === sourceId\n    );\n    const destinationIndex = this.state.items.findIndex(\n      item => item.id === destinationId\n    );\n\n    // If source/destination is unknown, do nothing.\n    if (sourceId === -1 || destinationId === -1) {\n      return;\n    }\n\n    const offset = destinationIndex - sourceIndex;\n\n    this.setState(state => ({\n      items: moveElement(state.items, sourceIndex, offset)\n    }));\n\n    //store items in cookie\n    var i\n    var idList = []\n    for(i in this.state.items){\n       idList.push(this.state.items[i].id)\n    }\n    Cookies.set('idList', idList)\n  };\n}\n\nexport default GridContext;\n"]},"metadata":{},"sourceType":"module"}