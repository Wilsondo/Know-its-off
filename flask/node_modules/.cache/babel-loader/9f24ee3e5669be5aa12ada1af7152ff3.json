{"ast":null,"code":"import _defineProperty from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/e/MyReact/new_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{CircleSpinner}from'react-spinners-kit';import axiosBaseURL from'../axios.js';var EditUser=/*#__PURE__*/function(_Component){_inherits(EditUser,_Component);var _super=_createSuper(EditUser);function EditUser(props){var _this;_classCallCheck(this,EditUser);_this=_super.call(this,props);_this.verify=function(event){_this.setState({verifyLoad:true});axiosBaseURL.post('/login',{email:_this.state.current.email,password:_this.state.current.password}).then(function(result){_this.setState({verifyLoad:false,detail_form:true,flag:false});}).catch(function(error){_this.setState({verifyLoad:false,flag:true,error_response:error.response.status});if(error.response.data===\"not authorized\"){_this.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}});event.preventDefault();};_this.delete=function(event){_this.setState({deleteLoad:true});var r=window.confirm(\"Are you sure?\");if(r===true){axiosBaseURL.post('/login',{email:_this.state.current.email,password:_this.state.current.password}).then(function(result){axiosBaseURL.delete('/user/current');_this.setState({deleteLoad:false,redirect:\"/\"});}).catch(function(error){_this.setState({deleteLoad:false,flag:true,error_response:error.response.status});if(error.response.data===\"not authorized\"){_this.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}});}else _this.setState({loading:false});};_this.handleChange=function(event){_this.setState({current:_objectSpread(_objectSpread({},_this.state.current),{},_defineProperty({},event.target.name,event.target.value))});};_this.handlePassChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.update=function(event){_this.setState({changeLoad:true});if(_this.state.current.email===undefined||_this.state.current.username===undefined){alert(\"Fill out Username field.\");_this.setState({changeLoad:false});event.preventDefault();}else if(_this.state.confirmPass!==_this.state.currentPass){alert(\"Passwords do not match.\");_this.setState({changeLoad:false});event.preventDefault();}else{axiosBaseURL.post('/login',{email:_this.state.current.email,password:_this.state.current.password}).then(function(result){axiosBaseURL.patch('/user/current',{email:_this.state.current.email,password:_this.state.confirmPass,username:_this.state.current.username}).then(function(result){_this.setState({changeLoad:false});alert(\"User Information Successfully Updated!\");}).catch(function(error){_this.setState({changeLoad:false,error:true,error_response:error.response.data});if(error.response.data===\"not authorized\"){_this.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}});}).catch(function(error){_this.setState({changeLoad:false,error:true,error_response:error.response.data});if(error.response.data===\"not authorized\"){_this.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}});event.preventDefault();}};_this.state={current:{username:\"\",email:\"\",password:\"\"},currentPass:\"\",confirmPass:\"\",detail_form:false,flag:false,loading:true,verifyLoad:false,deleteLoad:false,changeLoad:false,error:false,redirect:null};return _this;}_createClass(EditUser,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.detail_form===false)axiosBaseURL.get(\"/user/current\").then(function(result){_this2.setState({loading:false,current:{username:result.data.username,email:result.data.email}});}).catch(function(error){_this2.setState({loading:false,error:true});if(error.response){_this2.setState({error_response:error.response.status});if(error.response.data===\"not authorized\"){_this2.setState({redirect:\"/\"});}else if(error.response.data){console.log(error.response.data);}}});}},{key:\"render\",value:function render(){if(this.state.error){return/*#__PURE__*/_jsx(\"div\",{className:\"m-5\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Error: Not Logged In\"})});}if(this.state.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center m-5\",children:/*#__PURE__*/_jsx(CircleSpinner,{size:60,color:\"#686769\",loading:this.state.loading})});}var _this$state=this.state,detail_form=_this$state.detail_form,flag=_this$state.flag;return/*#__PURE__*/_jsxs(\"div\",{className:\"m-5 text-light\",children:[flag&&/*#__PURE__*/_jsx(\"div\",{color:\"red\",children:\"Email or password incorrect\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Enter User Details:\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"email\",id:\"inputEmail\",type:\"email\",onChange:this.handleChange,value:this.state.current.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"password\",id:\"inputPassword\",type:\"password\",onChange:this.handleChange,value:this.state.current.password})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.verify,className:\"btn btn-success btn-space\",children:[\"Verify and Change User Details\",/*#__PURE__*/_jsx(CircleSpinner,{size:10,color:\"#3BBCE5\",loading:this.state.verifyLoad})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.delete,className:\"btn btn-danger btn-space\",children:[\"Delete User\",/*#__PURE__*/_jsx(CircleSpinner,{size:10,color:\"#3BBCE5\",loading:this.state.deleteLoad})]})]}),detail_form&&/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Change Username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"username\",id:\"inputUsername\",type:\"username\",onChange:this.handleChange,value:this.state.current.username,placeholder:this.state.current.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Change Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"email\",id:\"inputEmail\",type:\"email\",onChange:this.handleChange,value:this.state.current.email,placeholder:this.state.current.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Change Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"currentPass\",id:\"inputCurrentPass\",type:\"password\",onChange:this.handlePassChange,value:this.state.currentPass,placeholder:this.state.currentPass})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"confirmPass\",id:\"inputConfirmPass\",type:\"password\",onChange:this.handlePassChange,value:this.state.confirmPass,placeholder:this.state.confirmPass})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:this.update,className:\"btn btn-success btn-space\",children:[\"Update Information\",/*#__PURE__*/_jsx(CircleSpinner,{size:10,color:\"#3BBCE5\",loading:this.state.changeLoad})]})]})]});}}]);return EditUser;}(Component);export{EditUser as default};","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/editUser.js"],"names":["React","Component","CircleSpinner","axiosBaseURL","EditUser","props","verify","event","setState","verifyLoad","post","email","state","current","password","then","result","detail_form","flag","catch","error","error_response","response","status","data","redirect","console","log","preventDefault","delete","deleteLoad","r","window","confirm","loading","handleChange","target","name","value","handlePassChange","update","changeLoad","undefined","username","alert","confirmPass","currentPass","patch","get"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport {CircleSpinner} from 'react-spinners-kit' \r\nimport axiosBaseURL from '../axios.js'\r\n\r\nexport default class EditUser extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            current: {\r\n                username: \"\", \r\n                email: \"\", \r\n                password: \"\",\r\n            },\r\n            currentPass: \"\", \r\n            confirmPass: \"\",\r\n            detail_form: false, \r\n            flag: false,\r\n            loading: true, \r\n            verifyLoad: false,\r\n            deleteLoad: false, \r\n            changeLoad: false, \r\n            error: false, \r\n            redirect: null\r\n        };\r\n    }\r\n\r\n   componentDidMount() {\r\n      if(this.state.detail_form === false)\r\n         axiosBaseURL.get(\"/user/current\")\r\n         .then((result) => {\r\n            this.setState({\r\n               loading: false, \r\n               current: {\r\n                  username: result.data.username, \r\n                  email: result.data.email\r\n               }\r\n            });\r\n         })\r\n         .catch((error) => {\r\n            this.setState({loading: false, error: true});\r\n            if(error.response){\r\n               this.setState({error_response: error.response.status});\r\n               if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\r\n            else if (error.response.data){console.log(error.response.data)}\r\n         }\r\n      })\r\n   }\r\n\r\n   verify = (event) => {\r\n      this.setState({verifyLoad : true});\r\n      axiosBaseURL.post('/login', {email: this.state.current.email, password: this.state.current.password})\r\n      .then((result) => {\r\n         this.setState({verifyLoad: false, detail_form: true, flag: false});\r\n      })\r\n      .catch((error) => {\r\n         this.setState({verifyLoad: false, flag:true, error_response: error.response.status});\r\n         if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\r\n         else if (error.response.data){console.log(error.response.data)}\r\n      })\r\n      event.preventDefault();\r\n   }\r\n\r\n   delete = (event) => {\r\n        this.setState({deleteLoad : true});\r\n        const r = window.confirm(\"Are you sure?\");\r\n        if(r === true) {\r\n            axiosBaseURL.post('/login', {email: this.state.current.email, password: this.state.current.password})\r\n            .then((result) => {\r\n                axiosBaseURL.delete('/user/current')\r\n                this.setState({deleteLoad: false, redirect: \"/\"})\r\n            })\r\n            .catch((error) => {\r\n                this.setState({deleteLoad: false, flag:true, error_response: error.response.status});\r\n                if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\r\n                else if (error.response.data){console.log(error.response.data)}\r\n            })\r\n        }\r\n        else this.setState({loading : false})\r\n   }\r\n\r\n   handleChange = (event) => {\r\n        this.setState({\r\n           current: {...this.state.current,[event.target.name]: event.target.value}\r\n        });\r\n   };\r\n\r\n   handlePassChange = (event) => {\r\n      this.setState({[event.target.name]: event.target.value})\r\n   };\r\n\r\n\r\n   update = (event) => {\r\n      this.setState({changeLoad: true})\r\n      if(this.state.current.email === undefined || this.state.current.username === undefined) {\r\n         alert(\"Fill out Username field.\");\r\n         this.setState({changeLoad: false});\r\n         event.preventDefault();\r\n      }\r\n      else if(this.state.confirmPass !== this.state.currentPass) {\r\n         alert(\"Passwords do not match.\");\r\n         this.setState({changeLoad: false});\r\n         event.preventDefault();\r\n      }\r\n      else {\r\n         axiosBaseURL.post('/login', {email: this.state.current.email, password: this.state.current.password})\r\n         .then((result) => {\r\n            axiosBaseURL.patch('/user/current', {email: this.state.current.email, password: this.state.confirmPass, username: this.state.current.username})\r\n            .then((result) => {\r\n               this.setState({changeLoad: false})\r\n               alert(\"User Information Successfully Updated!\");\r\n            })\r\n            .catch((error) => {\r\n               this.setState({changeLoad: false, error: true, error_response: error.response.data})\r\n               if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\r\n               else if (error.response.data){console.log(error.response.data)}\r\n            });\r\n         })\r\n         .catch((error) => {\r\n            this.setState({changeLoad: false, error: true, error_response: error.response.data})\r\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\r\n            else if (error.response.data){console.log(error.response.data)}\r\n         });\r\n         event.preventDefault();\r\n      }\r\n   };\r\n\r\n   render() {\r\n      if(this.state.error) {\r\n         return(<div className=\"m-5\"><h3>Error: Not Logged In</h3></div>)  \r\n      }\r\n      if(this.state.loading){\r\n         return (\r\n            <div className=\"d-flex justify-content-center m-5\">\r\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\r\n            </div>)\r\n         }\r\n      const {detail_form, flag} = this.state;\r\n      return(\r\n<div className=\"m-5 text-light\">\r\n{flag && (\r\n    <div color=\"red\">Email or password incorrect</div>\r\n)}\r\n<h3>Enter User Details:</h3>\r\n<form>\r\n    <div className=\"form-group\">\r\n        <label>Email</label>\r\n        <input className=\"form-control\" name=\"email\" id=\"inputEmail\" type=\"email\" onChange={this.handleChange} value={this.state.current.email}></input>\r\n    </div>\r\n\r\n    <div className=\"form-group\">\r\n        <label>Password</label>\r\n        <input className=\"form-control\" name=\"password\" id=\"inputPassword\" type=\"password\" onChange={this.handleChange} value={this.state.current.password}></input>\r\n    </div>\r\n\r\n    <button onClick={this.verify} className=\"btn btn-success btn-space\">Verify and Change User Details<CircleSpinner size={10} color=\"#3BBCE5\" loading={this.state.verifyLoad} /></button>\r\n    <button onClick={this.delete} className=\"btn btn-danger btn-space\">Delete User<CircleSpinner size={10} color=\"#3BBCE5\" loading={this.state.deleteLoad} /></button>\r\n</form>\r\n{detail_form && (\r\n    <form>\r\n        <div className=\"form-group\">\r\n            <label>Change Username</label>\r\n            <input className=\"form-control\" name=\"username\" id=\"inputUsername\" type=\"username\" onChange={this.handleChange} value={this.state.current.username} placeholder={this.state.current.username}/>\r\n        </div>\r\n        \r\n        <div className=\"form-group\">\r\n            <label>Change Email</label>\r\n            <input className=\"form-control\" name=\"email\" id=\"inputEmail\" type=\"email\" onChange={this.handleChange} value={this.state.current.email} placeholder={this.state.current.email}/>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n            <label>Change Password</label>\r\n            <input className=\"form-control\" name=\"currentPass\" id=\"inputCurrentPass\" type=\"password\" onChange={this.handlePassChange} value={this.state.currentPass} placeholder={this.state.currentPass}/>\r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label>Confirm Password</label>\r\n            <input className=\"form-control\" name=\"confirmPass\" id=\"inputConfirmPass\" type=\"password\" onChange={this.handlePassChange} value={this.state.confirmPass} placeholder={this.state.confirmPass}/>\r\n        </div>\r\n        <button onClick={this.update} className=\"btn btn-success btn-space\">Update Information<CircleSpinner size={10} color=\"#3BBCE5\" loading={this.state.changeLoad} /></button>\r\n    </form>\r\n    )}\r\n</div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}