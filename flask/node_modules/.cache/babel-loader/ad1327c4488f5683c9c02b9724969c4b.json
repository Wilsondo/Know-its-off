{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/mnt/e/MyReact/new_frontend/src/components/addDevice.js\";\nimport React, { Component } from 'react';\nimport { CircleSpinner } from 'react-spinners-kit';\nimport axiosBaseURL from '../axios.js';\nexport default class addDevice extends Component {\n  constructor(props) {\n    super(props);\n\n    this.postData = event => {\n      this.setState({\n        postLoading: true\n      }); //if creating a new appliance post it first\n\n      if (this.state.myDevice.device_id === 0) {\n        axios.post('/appliances', this.state.myDevice).then(result => {\n          console.log(result);\n          this.setState({\n            myDevice: { ...this.state.myDevice,\n              device_id: result.data.id\n            }\n          });\n          this.postScout();\n        }).catch(error => {\n          this.setState({\n            postLoading: false,\n            error: true\n          });\n        });\n      } else {\n        this.postScout();\n      }\n\n      event.preventDefault();\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        myDevice: { ...this.state.myDevice,\n          [event.target.appliance_name]: event.target.value\n        }\n      });\n    };\n\n    this.handleChangeScout = event => {\n      this.setState({\n        myDevice: { ...this.state.myDevice,\n          [event.target.appliance_name]: event.target.value\n        }\n      });\n    };\n\n    this.handleChangeSelect = event => {\n      //get the appliance id of the choosen value and set in state\n      if (event.target.value === \"New Device\") {\n        this.setState({\n          disabled: false,\n          myDevice: { ...this.state.myDevice,\n            device_id: 0\n          }\n        });\n      } else {\n        this.setState({\n          disabled: true,\n          myDevice: { ...this.state.myDevice,\n            device_id: parseInt(event.target.value)\n          }\n        });\n      }\n    };\n\n    this.handleChangeCheck = event => {\n      if (event.target.value === \"false\") {\n        this.setState({\n          myDevice: { ...this.state.myDevice,\n            [event.target.appliance_name]: true\n          }\n        });\n      } else {\n        this.setState({\n          myDevice: { ...this.state.myDevice,\n            [event.target.appliance_name]: false\n          }\n        });\n      }\n    };\n\n    this.state = {\n      myDevice: {\n        appliance_name: \"My Appliance\",\n        device_state: \"1\",\n        device_battery: \"100.0\",\n        timestamp: \"2019-04-30T08:59:00.000Z\"\n      },\n      userDevices: [],\n      applianceNames: [],\n      disabled: false,\n      loading: true,\n      error: false,\n      postLoading: false,\n      redirect: null\n    };\n  } //Get users appliances, add the names to the select form element\n\n\n  componentDidMount() {\n    axiosBaseURL.get(\"/devices\").then(result => {\n      this.setState({\n        loading: false,\n        usersDevices: result.data\n      });\n      var myList = [];\n      var i;\n\n      for (i in this.state.usersDevices) {\n        myList.push([this.state.usersDevices[i].appliance_name, this.state.usersDevices[i].id]);\n      }\n\n      this.setState({\n        applianceNames: myList\n      });\n    }).catch(error => {\n      this.setState({\n        loading: false,\n        error: true\n      });\n\n      if (error.response) {\n        this.setState({\n          error_response: error.response.data\n        });\n\n        if (error.response.data === \"not authorized\") {\n          this.setState({\n            redirect: \"/\"\n          });\n        } else if (error.response.data) {\n          console.log(error.response.data);\n        }\n      }\n    });\n  }\n\n  postScout() {\n    console.log(this.state);\n    axios.post('/scouts', this.state.myDevice).then(result => {\n      this.setState({\n        postLoading: false\n      });\n      alert(\"Appliance added.\");\n    }).catch(error => {\n      this.setState({\n        postLoading: false,\n        error: true\n      });\n    });\n  }\n\n  render() {\n    if (this.state.error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-5\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"There was an error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center m-5\",\n        children: /*#__PURE__*/_jsxDEV(CircleSpinner, {\n          size: 60,\n          color: \"#686769\",\n          loading: this.state.loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this);\n    }\n\n    let options = this.state.applianceNames.map(data => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: data[1],\n      children: data[0]\n    }, data[1], false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 10\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"New Device\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Device name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            appliance_name: \"appliance_name\",\n            id: \"inputScoutName\",\n            \"aria-describedby\": \"nameHelp\",\n            onChange: this.handleChangeScout,\n            value: this.state.myDevice.appliance_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Choose Existing Device\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control\",\n            id: \"inputDeviceId\",\n            onChange: this.handleChangeSelect,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"New Device\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 10\n            }, this), options]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Appliance Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            appliance_name: \"appliance_name\",\n            id: \"inputApplianceName\",\n            disabled: this.state.disabled,\n            onChange: this.handleChange,\n            value: this.state.myDevice.appliance_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.postData,\n          className: \"btn btn-success\",\n          children: [\"Add this device\", /*#__PURE__*/_jsxDEV(CircleSpinner, {\n            size: 20,\n            color: \"#3BBCE5\",\n            loading: this.state.postLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 79\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 1\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/addDevice.js"],"names":["React","Component","CircleSpinner","axiosBaseURL","addDevice","constructor","props","postData","event","setState","postLoading","state","myDevice","device_id","axios","post","then","result","console","log","data","id","postScout","catch","error","preventDefault","handleChange","target","appliance_name","value","handleChangeScout","handleChangeSelect","disabled","parseInt","handleChangeCheck","device_state","device_battery","timestamp","userDevices","applianceNames","loading","redirect","componentDidMount","get","usersDevices","myList","i","push","response","error_response","alert","render","options","map"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {CircleSpinner} from 'react-spinners-kit' \nimport axiosBaseURL from '../axios.js'\n\n\nexport default class addDevice extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      myDevice: {\n\t\t   appliance_name: \"My Appliance\",\n         device_state: \"1\", \n         device_battery: \"100.0\",\n         timestamp: \"2019-04-30T08:59:00.000Z\",\n\t   },\n      userDevices: [],\n      applianceNames: [],\n      disabled: false,\n\t   loading: true,\n\t   error: false,\n\t   postLoading: false,\n      redirect: null\n    };\n  }\n\n   //Get users appliances, add the names to the select form element\n   componentDidMount() {\n      axiosBaseURL.get(\"/devices\")\n      .then((result) => {\n         this.setState({\n            loading: false,\n            usersDevices: result.data\n         });\n         var myList = [];\n         var i;\n         for(i in this.state.usersDevices) {\n            myList.push([this.state.usersDevices[i].appliance_name, this.state.usersDevices[i].id])\n         }\n         this.setState({applianceNames: myList})\n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         if(error.response){\n            this.setState({error_response: error.response.data});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         }\n      })\n   }\n\n   postData = (event) => {\n      this.setState({postLoading:true});\n      //if creating a new appliance post it first\n      if(this.state.myDevice.device_id === 0){\n         axios.post('/appliances', this.state.myDevice)\n         .then((result) => {\n            console.log(result)\n            this.setState({ myDevice: {...this.state.myDevice, device_id: result.data.id} })\n            this.postScout()\n         })\n         .catch((error) => {this.setState({postLoading:false, error:true})})\n      }\n      else {this.postScout()}\n\t   event.preventDefault();\n   };\n   postScout() {\n      console.log(this.state)\n      axios.post('/scouts', this.state.myDevice)\n      .then((result) =>{\n         this.setState({postLoading: false}); \n\t\t\talert(\"Appliance added.\")\n      })\n      .catch((error) => {this.setState({postLoading:false, error:true})})\n   };\n\n   handleChange = (event) => {\n      this.setState({\n         myDevice : {...this.state.myDevice, [event.target.appliance_name]: event.target.value}\n      });\n   };\n   handleChangeScout = (event) => {\n      this.setState({\n         myDevice : {...this.state.myDevice, [event.target.appliance_name]: event.target.value}\n      });\n   };\n   handleChangeSelect = (event) => {\n      //get the appliance id of the choosen value and set in state\n      if(event.target.value === \"New Device\"){ \n         this.setState({\n            disabled: false, \n            myDevice: {...this.state.myDevice, device_id: 0}\n         })\n      }\n      else{\n         this.setState({\n            disabled: true, \n            myDevice: {...this.state.myDevice, device_id: parseInt(event.target.value)}\n         })\n      }\n   };\n   handleChangeCheck = (event) => {\n      if(event.target.value === \"false\"){\n         this.setState({myDevice: {...this.state.myDevice, [event.target.appliance_name]: true}})\n      }\n      else {\n         this.setState({myDevice: {...this.state.myDevice, [event.target.appliance_name]: false}})\n      }\n   };\n\n\trender(){\n\t\tif(this.state.error){ \n         return(<div className=\"m-5\"><h3>There was an error</h3></div>) \n      }\n\t\tif(this.state.loading){\n         return (\n            <div className=\"d-flex justify-content-center m-5\">\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n            </div>)\n\t\t}\n      let options = this.state.applianceNames.map((data) =>\n         <option key={data[1]} value={data[1]}>{data[0]}</option>\n      );\n\t\treturn(\n<div className=\"m-5\">\n<h3>New Device</h3>\n<form>\n   <div className=\"form-group\">\n      <label>Device name</label>\n      <input className=\"form-control\" appliance_name=\"appliance_name\" id=\"inputScoutName\" aria-describedby=\"nameHelp\" onChange={this.handleChangeScout} value={this.state.myDevice.appliance_name} />\n   </div>\n\n   <div className=\"form-group\">\n      <label>Choose Existing Device</label>\n      <select className=\"form-control\" id=\"inputDeviceId\" onChange={this.handleChangeSelect}>\n         <option>New Device</option>\n         {options}\n      </select>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Appliance Name</label>\n      <input className=\"form-control\" appliance_name=\"appliance_name\" id=\"inputApplianceName\" disabled={this.state.disabled} onChange={this.handleChange} value={this.state.myDevice.appliance_name} />\n   </div>\n   <button onClick={this.postData} className=\"btn btn-success\">Add this device<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.postLoading} /></button>\n</form>\n</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}