(this["webpackJsonpknow-its-off"]=this["webpackJsonpknow-its-off"]||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);var s,n,i=a(0),c=a.n(i),r=a(25),o=a.n(r),l=(a(94),a(5)),d=a(6),h=a(8),j=a(7),p=a(18),b=a(13),m=a(16),u=(a(95),a(10)),v=a(79),g=a.n(v).a.create({baseURL:"https://know-its-off.com/api/"}),x=a(80),O=a.n(x),f=a(1),y=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={battery:[{device_battery:100,timestamp_time:""}],error:!1,loading:!0},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="/batteryLogs/"+this.props.match.params.handle;g.get(t).then((function(t){e.setState({battery:t.data}),e.setState({loading:!1})}))}},{key:"render",value:function(){return this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):this.state.error?this.state.redirect?Object(f.jsx)(b.a,{to:this.state.redirect}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Error 404, Page Not Found"}),Object(f.jsx)("h3",{children:this.state.error_response})]}):Object(f.jsxs)(c.a.Fragment,{children:[this.state.battery.map((function(e){return Object(f.jsx)("div",{className:"col mt-3 text-light",children:Object(f.jsx)("div",{className:"card bg-dark",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsxs)("p",{className:"card-text",children:["Battery: ",e.device_battery,"%"]}),Object(f.jsxs)("p",{className:"card-text",children:["Last Seen: ",e.timestamp_time]})]})})})})),Object(f.jsx)(O.a,{style:{display:"flex",margin:"1em"},className:"btn btn-info float-right footer affix",data:this.state.battery,children:"Download CSV"})]})}}]),a}(i.Component),N=a(48),C=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).toggleNavbar=s.toggleNavbar.bind(Object(N.a)(s)),s.state={collapsed:!0},s}return Object(d.a)(a,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this.state.collapsed,t=e?"collapse navbar-collapse justify-content-between":"collapse nav-bar collapse show justify-content-between",a=e?"navbar-toggler navbar-toggler-right collapsed":"navbar-toggler navbar-toggler-right";return Object(f.jsxs)("nav",{className:"navbar bg-primary navbar-expand-lg navbar-dark",children:[Object(f.jsx)(m.b,{to:"/home",className:"navbar-brand",children:"Know It's Off"}),Object(f.jsx)("button",{onClick:this.toggleNavbar,className:"".concat(a),type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(f.jsx)("span",{className:"navbar-toggler-icon"})}),Object(f.jsxs)("div",{className:"".concat(t),id:"navbarNavAltMarkup",children:[Object(f.jsxs)("div",{className:"navbar-nav",children:[Object(f.jsx)(m.b,{to:"/device/new",className:"nav-item nav-link text-light",children:"New Device"}),Object(f.jsx)(m.b,{to:"/user/edit",className:"nav-item nav-link text-light",children:"Edit User"})]}),Object(f.jsx)("div",{className:"navbar-nav",children:Object(f.jsx)(m.b,{to:"/logout",className:"nav-item nav-link text-light",children:"Logout"})})]})]})}}]),a}(i.Component),D=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h3",{children:"404 Error: Page not found"})})}}]),a}(i.Component),S=a(23),w=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).doLogin=function(e){s.setState({postLoading:!0}),g.post("/login",{email:s.state.email,password:s.state.password}).then((function(e){s.setState({postLoading:!1,flag:!1}),s.props.history.push("/home")})).catch((function(e){s.setState({postLoading:!1,flag:!0})})),e.preventDefault()},s.handleChange=function(e){s.setState(Object(S.a)({},e.target.name,e.target.value))},s.state={loading:!1,email:"",password:"",error:!1,flag:!1,postLoading:!1},s}return Object(d.a)(a,[{key:"render",value:function(){if(this.state.loading)return Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})});var e=this.state.flag;return Object(f.jsxs)("div",{className:"mt-5 mb-5 container bg-dark border",children:[Object(f.jsx)("div",{className:"row justify-content-md-center text-light mt-5",children:Object(f.jsx)("h1",{children:"Log In to Know It's Off"})}),Object(f.jsx)("div",{className:"row justify-content-md-center text-light mb-5",children:Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"form-group",children:[e&&Object(f.jsx)("div",{className:"text-danger",children:"*Email or password incorrect"}),Object(f.jsx)("label",{children:"Email address"}),Object(f.jsx)("input",{name:"email",type:"email",className:"form-control",value:this.state.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{name:"password",type:"password",onChange:this.handleChange,value:this.state.password,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})]}),Object(f.jsxs)("button",{onClick:this.doLogin,className:"btn btn-primary",children:["Submit",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})]}),Object(f.jsx)(m.b,{id:"signupHelp",to:"/signup",className:"form-text text-muted",children:"Register New User"})]})})]})}}]),a}(i.Component),k=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).doSignup=function(e){s.setState({postLoading:!0}),g.post("/user",{email:s.state.email,password:s.state.password}).then((function(e){s.setState({postLoading:!1}),s.props.history.push("/login")})).catch((function(t){s.setState({postLoading:!1}),alert("Invalid email and password"),e.preventDefault()}))},s.handleChange=function(e){s.setState(Object(S.a)({},e.target.name,e.target.value))},s.state={loading:!1,email:"",password:"",error:!1,postLoading:!1},s}return Object(d.a)(a,[{key:"render",value:function(){return this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(f.jsxs)("div",{className:"mt-5 mb-5 container bg-dark border",children:[Object(f.jsx)("div",{className:"row justify-content-md-center mt-5",children:Object(f.jsx)("h1",{children:"Sign up to Know It's Off"})}),Object(f.jsx)("div",{className:"row justify-content-md-center mb-5",children:Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Email address"}),Object(f.jsx)("input",{name:"email",type:"email",className:"form-control",value:this.state.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Password"}),Object(f.jsx)("input",{name:"password",type:"password",onChange:this.handleChange,value:this.state.password,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Confirm Password"}),Object(f.jsx)("input",{name:"passwordConf",type:"password",onChange:this.handleChange,value:this.state.passwordConf,className:"form-control",id:"exampleInputPassword2",placeholder:"Password"})]}),Object(f.jsxs)("button",{onClick:this.doSignup,className:"btn btn-primary",children:["Submit",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})]})]})})]})}}]),a}(i.Component),_=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={error:!1,redirect:"/"},s}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return this.state.error?Object(f.jsx)("div",{className:"m-5 text-light",children:Object(f.jsx)("h3",{children:"Error 404, Page Not Found"})}):(g.get("/logout").then((function(){e.props.history.push("/login")})).catch((function(){return Object(f.jsx)(b.a,{to:"/"})})),Object(f.jsx)(b.a,{to:"/"}))}}]),a}(i.Component),I=a(64),P=a(151),E=a(150),L=Object(i.memo)((function(e){var t=e.id,a=e.onMoveItem,s=e.children,n=Object(i.useRef)(null),r=Object(P.a)({item:{id:t,type:"IMG"},collect:function(e){return{isDragging:e.isDragging()}}}),o=Object(I.a)(r,2),l=o[0].isDragging,d=o[1],h=Object(E.a)({accept:"IMG",hover:function(e){e.id!==t&&a(e.id,t)}}),j=Object(I.a)(h,2)[1];d(n),j(n);var p={opacity:l?.5:1};return c.a.Children.map(s,(function(e){return c.a.cloneElement(e,{forwardedRef:n,style:p})}))})),B=a(83),z=a(63),A=a(49),M=A.default.div(s||(s=Object(z.a)(["\n  width: 100%;\n  padding: 0px 10px 0px 10px;\n  display: flex;\n  justify-content: start;\n  flex-wrap: wrap;\n"]))),H=A.default.div(n||(n=Object(z.a)(['\n  flex: 0 0 25%;\n  flex-grow: 0.75;\n  min-width: 250px;\n  max-width: 500px;\n  max-height: 270px;\n  display: flex;\n  justify-content: center;\n  align-items: stretch;\n  box-sizing: border-box;\n  :before {\n    content: "";\n    display: table;\n    padding-top: 100%;\n  }\n']))),F=function(e){var t=e.forwardedRef,a=Object(B.a)(e,["forwardedRef"]);return Object(f.jsx)(H,Object(p.a)({ref:t},a))},T=a(57),U=a.n(T);function R(e,t,a){return function(e,t,a){return a>=e.length&&(a=e.length-1),e.splice(a,0,e.splice(t,1)[0]),e}(e,t,t+a)}var G=Object(i.createContext)({items:[]}),J=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).setItems=function(e){if(!U.a.get("idList")&&e)s.setState({items:e});else{var t,a,n=e.slice(),i=JSON.parse(U.a.get("idList")),c=[];for(t in i)for(a in n){n[a].id===i[t]&&(c.push(n[a]),n.splice(a,1))}}for(t in n)c.push(n[t]);c&&s.setState({items:c})},s.moveItem=function(e,t){var a=s.state.items.findIndex((function(t){return t.id===e})),n=s.state.items.findIndex((function(e){return e.id===t}));if(-1!==e&&-1!==t){var i,c=n-a;s.setState((function(e){return{items:R(e.items,a,c)}}));var r=[];for(i in s.state.items)r.push(s.state.items[i].id);U.a.set("idList",r)}},s.state={items:[],moveItem:s.moveItem,setItems:s.setItems},s}return Object(d.a)(a,[{key:"render",value:function(){return Object(f.jsx)(G.Provider,{value:this.state,children:this.props.children})}}]),a}(i.Component),K=G,Y=a(31),V=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={device_id:e.props.device_id,appliance_name:e.props.appliance_name,device_state:e.props.state,timestamp:e.props.timestamp,statusText:"OFF",background:"light",loading:!0},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){1===this.props.state?this.setState({background:"success",statusText:"ON"}):2===this.props.state?this.setState({background:"warning",statusText:"UNINITIALIZED"}):0===this.props.state&&this.setState({background:"danger"}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(f.jsxs)(Y.a,{bg:this.state.background,className:"tile text-center col ",children:[Object(f.jsx)(Y.a.Header,{children:Object(f.jsx)(Y.a.Title,{className:"card-title-device",children:this.state.appliance_name})}),Object(f.jsxs)(Y.a.Body,{children:[Object(f.jsx)(Y.a.Title,{className:"card-title-status",children:this.state.statusText}),Object(f.jsx)(Y.a.Text,{className:"card-text-device_state",children:this.state.state}),Object(f.jsxs)(Y.a.Text,{className:"card-text-timestamp",children:["Last Seen: ",this.state.timestamp]}),Object(f.jsx)(m.b,{className:"card-button btn btn-primary text-wrap",to:"/device/"+this.state.device_id,children:"Details"})]})]})}}]),a}(i.Component);var W=function(e){var t=Object(i.useContext)(K),a=t.items,s=t.moveItem;return Object(f.jsx)("div",{className:"GridApp",children:Object(f.jsx)(M,{children:a.map((function(e){return Object(f.jsx)(L,{id:e.id,onMoveItem:s,children:Object(f.jsx)(F,{children:Object(f.jsx)(V,{device_id:e.id,device_battery:e.device_battery,appliance_name:e.appliance_name,state:e.device_state,timestamp:e.timestamp},e.id)})},e.id)}))})})},Z=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).count_dev_state=function(e){for(var t=0,a=0;e.length>a;a++)1===e[a].device_state&&t++;return t},s.state={loading:!0,error:!1,redirect:null},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.get("/devices").then((function(t){e.setState({num_on:e.count_dev_state(t.data)}),e.context.setItems(t.data),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1,error:!0}),console.log("We ran into an issue with retrieving your device data, error: ",t.response)}))}},{key:"render",value:function(){return this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):this.state.error?this.state.redirect?Object(f.jsx)(b.a,{to:this.state.redirect}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Error 404, Page Not Found"}),Object(f.jsx)("h3",{children:this.state.error_response})]}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"row m-3 text-light",children:Object(f.jsx)("div",{className:"col",children:Object(f.jsx)("h1",{className:"text-center",children:"Home"})})}),Object(f.jsx)("div",{className:"row m-3 text-light",children:Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("h6",{className:"text-muted text-center",children:[this.state.num_on," of your appliances are on."]})})}),Object(f.jsx)(W,{})]})}}]),a}(i.Component);Z.contextType=K;var q,Q=a(58),X=a.n(Q),$=a(148),ee=a(149),te=a(146),ae=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.setState({toChange:Object(p.a)(Object(p.a)({},s.state.toChange),{},Object(S.a)({},e.target.name,e.target.value))})},s.handleAccordion=function(e){return function(t){switch(e){case 1:var a=!s.state.expanded1;s.setState({expanded1:a});break;case 2:var n=!s.state.expanded2;s.setState({expanded2:n});break;case 3:var i=!s.state.expanded3;s.setState({expanded3:i})}}},s.doEmail=function(e){s.setState({loading1:!0}),void 0===s.state.toChange.email||s.state.toChange.email===s.state.current.email?(alert("Please enter valid email into field"),s.setState({loading1:!1}),e.preventDefault()):g.patch("/user/current",{email:s.state.toChange.email}).then((function(e){s.setState({loading1:!1}),alert("User Information Successfully Updated!")})).catch((function(e){s.setState({changeLoad:!1,error:!0,error_response:e.response.data})}))},s.doPass=function(e){s.setState({loading2:!0}),g.post("/user/check/"+s.state.toChange.oldPass).then((function(t){s.state.toChange.pass===s.state.toChange.checkPass&&204===t.status?g.patch("/user/current",{password:s.state.toChange.pass}).then((function(e){s.setState({loading2:!1}),alert("User Information Successfully Updated!")})):(alert("Your Passwords do not match"),s.setState({loading2:!1}),e.preventDefault())})).catch((function(t){s.setState({loading2:!1,error_response:t.response.status}),alert("Your old password is incorrect"),e.preventDefault()}))},s.delete=function(e){s.setState({loading3:!0}),!0===window.confirm("Are you sure?")?g.post("/login",{email:s.state.current.email,password:s.state.toChange.deleteconfirm}).then((function(e){g.delete("/user/current"),s.setState({loading3:!1}),s.props.history.push("/login")})).catch((function(e){s.setState({loading3:!1,error_response:e.response.status}),alert("Password incorrect")})):s.setState({loading:!1}),e.preventDefault()},s.state={current:{email:"",password:""},toChange:{email:"",oldPass:"",pass:"",checkPass:"",deleteconfirm:""},loading:!1,error:!1,loading1:!1,loading2:!1,loading3:!1,expanded1:!1,expanded2:!1,expanded3:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.get("/user/current").then((function(t){e.setState({loading:!1,current:{email:t.data.email,password:t.data.password}})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&e.setState({error_response:t.response.status})}))}},{key:"render",value:function(){return this.state.error?Object(f.jsx)("div",{className:"m-5 text-light",children:Object(f.jsx)("h3",{children:"Error: Not Logged In"})}):this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(f.jsxs)("div",{className:"m-5 text-light",children:[Object(f.jsxs)($.a,{className:"bg-secondary text-light",expanded:this.state.expanded1,onChange:this.handleAccordion(1),children:[Object(f.jsx)(ee.a,{expandIcon:Object(f.jsx)(X.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:"Change Email"}),Object(f.jsxs)(te.a,{children:[Object(f.jsx)("input",{name:"email",type:"email",className:"form-control",value:this.state.toChange.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter new email address"}),Object(f.jsxs)("button",{onClick:this.doEmail,className:"btn btn-outline-info",children:["Submit",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading1})]})]})]}),Object(f.jsxs)($.a,{className:"bg-secondary text-light",expanded:this.state.expanded2,onChange:this.handleAccordion(2),children:[Object(f.jsx)(ee.a,{expandIcon:Object(f.jsx)(X.a,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:"Change Password"}),Object(f.jsx)(te.a,{children:Object(f.jsxs)("div",{className:"d-grid gap-2 d-md-flex",children:[Object(f.jsxs)("div",{className:"form-group container-fluid",children:[Object(f.jsx)("label",{children:"Current Password"}),Object(f.jsx)("input",{name:"oldPass",type:"password",className:"form-control",value:this.state.toChange.oldPass,onChange:this.handleChange,id:"exampleInputPassword","aria-describedby":"passwordHelp",placeholder:"Current Password"})]}),Object(f.jsxs)("div",{className:"form-group container-fluid",children:[Object(f.jsx)("label",{children:"New Password"}),Object(f.jsx)("input",{name:"pass",type:"password",className:"form-control",value:this.state.toChange.pass,onChange:this.handleChange,id:"exampleInputPassword2","aria-describedby":"passwordHelp",placeholder:"New Password"})]}),Object(f.jsxs)("div",{className:"form-group container-fluid gap-2",children:[Object(f.jsx)("label",{children:"Confirm Password"}),Object(f.jsx)("input",{name:"checkPass",type:"password",className:"form-control",value:this.state.toChange.checkPass,onChange:this.handleChange,id:"exampleInputPassword1","aria-describedby":"passwordHelp",placeholder:"Confirm Password"})]}),Object(f.jsxs)("button",{onClick:this.doPass,className:"btn btn-outline-info",children:["Submit",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading2})]})]})})]}),Object(f.jsxs)($.a,{className:"bg-secondary text-light",expanded:this.state.expanded3,onChange:this.handleAccordion(3),children:[Object(f.jsx)(ee.a,{expandIcon:Object(f.jsx)(X.a,{}),"aria-controls":"panel3bh-content",id:"panel3bh-header",children:"Delete Account"}),Object(f.jsxs)(te.a,{children:[Object(f.jsx)("input",{name:"deleteconfirm",type:"password",className:"form-control",value:this.state.toChange.deleteconfirm,onChange:this.handleChange,id:"exampleInput5","aria-describedby":"emailHelp",placeholder:"Enter your account password"}),Object(f.jsxs)("button",{onClick:this.delete,className:"btn btn-outline-info",children:["Submit",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading3})]})]})]})]})}}]),a}(i.Component),se=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).postData=function(e){s.setState({postLoading:!0}),g.get("/allDevices").then((function(e){s.setState({allDevices:e.data})}));var t=0,a=!0;for(t in s.state.allDevices)String(s.state.myDevice.id)===String(s.state.allDevices[t].id)&&(a=!1);(a||"0"===s.state.myDevice.id)&&g.post("/device",s.state.myDevice).then((function(e){s.setState({myDevice:Object(p.a)(Object(p.a)({},s.state.myDevice),{},{id:e.data.id}),postLoading:!1,revealDetails:!0}),alert("Device Creation Successful!"),s.props.history.push("/home")})).catch((function(e){s.setState({postLoading:!1}),alert("Please enter a valid Device ID!")})),e.preventDefault()},s.handleChangeDevice=function(e){s.setState({myDevice:Object(p.a)(Object(p.a)({},s.state.myDevice),{},Object(S.a)({},e.target.name,e.target.value))})},s.state={myDevice:{id:"0",appliance_name:"My Appliance",device_state:0,device_battery:100},allDevices:[],error:!1,postLoading:!1,redirect:null,revealDetails:!1},s}return Object(d.a)(a,[{key:"render",value:function(){if(this.state.error)return Object(f.jsx)("div",{className:"m-5 text-light",children:Object(f.jsx)("h3",{children:"Error 404, Page Not Found"})});var e=this.state.revealDetails;return Object(f.jsxs)("div",{className:"m-5 text-light",children:[Object(f.jsx)("h3",{children:"New Device"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Appliance Name"}),Object(f.jsx)("input",{className:"form-control text-dark",name:"appliance_name",id:"inputApplianceName","aria-describedby":"nameHelp",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name}),Object(f.jsx)("label",{children:"Device ID"}),Object(f.jsx)("input",{className:"form-control text-dark",name:"id",id:"inputId","aria-describedby":"nameHelp",onChange:this.handleChangeDevice,value:this.state.myDevice.id})]}),Object(f.jsxs)("button",{onClick:this.postData,className:"btn btn-success",children:["Add this device",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",postLoading:this.state.postLoading})]})]}),e&&Object(f.jsx)(V,{device_id:this.state.myDevice.id,device_battery:this.state.myDevice.device_battery,appliance_name:this.state.myDevice.appliance_name,state:this.state.myDevice.device_state,timestamp:this.state.myDevice.timestamp},this.state.myDevice.id)]})}}]),a}(i.Component),ne=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).updateDevice=function(e){s.setState({loading:!0}),g.get("/allDevices").then((function(t){s.setState({allDevices:t.data});var a=0;for(a in s.state.allDevices)String(s.state.allDevices[a].id)===String(s.state.myDevice.id)&&s.setState({idCheck:!0});s.state.idCheck?(s.setState({loading:!1}),alert("Please enter a valid Device ID!")):g.patch(q,s.state.myDevice).then((function(e){s.setState({loading:!1}),alert("Device Updated Successfully!"),s.props.history.push("/home")})).catch((function(e){s.setState({loading:!1}),alert("Please enter a valid Device ID!")})),e.preventDefault()})).catch((function(e){s.setState({loading:!1,error:!0}),e.response&&(s.setState({error_response:e.response.data}),"not authorized"===e.response.data?s.setState({redirect:q}):e.response.data&&console.log(e.response))}))},s.handleChangeDevice=function(e){s.setState({myDevice:Object(p.a)(Object(p.a)({},s.state.myDevice),{},Object(S.a)({},e.target.name,e.target.value))})},s.state={myDevice:{appliance_name:"My Appliance",id:1},allDevices:[],loading:!0,error:!1,idCheck:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.handle;q="/device/"+t,g.get(q).then((function(t){e.setState({myDevice:{id:t.data.id,appliance_name:t.data.appliance_name},loading:!1})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.data}),"not authorized"===t.response.data?e.setState({redirect:q}):t.response.data&&console.log(t.response))}))}},{key:"render",value:function(){return this.state.error?this.state.redirect?Object(f.jsx)(b.a,{to:this.state.redirect}):Object(f.jsx)("div",{className:"m-5 text-light",children:Object(f.jsx)("h3",{children:"Error 404, Page Not Found"})}):this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(f.jsxs)("div",{className:"m-5 text-light",children:[Object(f.jsx)("h3",{children:"Edit Device"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Appliance Name"}),Object(f.jsx)("input",{className:"form-control text-dark",name:"appliance_name",id:"inputApplianceName","aria-describedby":"nameHelp",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name}),Object(f.jsx)("label",{children:"Device ID"}),Object(f.jsx)("input",{className:"form-control text-dark",name:"id",id:"inputDeviceId","aria-describedby":"nameHelp",onChange:this.handleChangeDevice,value:this.state.myDevice.id})]}),Object(f.jsxs)("button",{onClick:this.updateDevice,className:"btn btn-success",children:["Update",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading})]})]})]})}}]),a}(i.Component),ie=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).deleteDevice=function(e){if(!0===window.confirm("Do you really want to delete this, it will be permanent!")){var t="/device/"+s.props.match.params.handle;g.delete(t).then((function(e){s.setState({loading:!1}),alert("Device Removed Successfully!"),s.props.history.push("/home")})).catch((function(e){s.setState({error:!0}),e.response&&(console.log(e.response),s.setState({error_response:e.response.data}))})),e.preventDefault()}},s.state={myDevice:{appliance_name:"",device_state:1,device_battery:100,timestamp:"",id:1},error:!1,loading:!0,redirect:"/home"},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="/device/"+this.props.match.params.handle;g.get(t).then((function(t){e.setState({myDevice:{id:t.data.id,appliance_name:t.data.appliance_name,device_state:t.data.device_state,device_battery:t.data.device_battery,timestamp:t.data.timestamp}}),e.setState({loading:!1})})).catch((function(t){e.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){return this.state.loading?Object(f.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(f.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):this.state.error?this.state.redirect?Object(f.jsx)(b.a,{to:this.state.redirect}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Error 404, Page Not Found"}),Object(f.jsx)("h3",{children:this.state.error_response})]}):Object(f.jsx)("div",{className:"col mt-3 text-light",children:Object(f.jsx)("div",{className:"card bg-dark",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsxs)("button",{onClick:this.deleteDevice,className:"btn btn-sm btn-danger float-right","data-toggle":"tooltip","data-placement":"bottom",title:"Delete Device",children:["\u2716",Object(f.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading})]}),Object(f.jsx)("h5",{className:"card-title text-wrap",children:this.state.myDevice.appliance_name}),Object(f.jsxs)("p",{className:"card-title text-wrap",children:["Device ID: ",this.state.myDevice.id]}),Object(f.jsxs)("p",{className:"card-text",children:["State: ",this.state.myDevice.device_state?"ON":"OFF"]}),Object(f.jsxs)("p",{className:"card-text",children:["Battery: ",this.state.myDevice.device_battery,"%"]}),Object(f.jsxs)("p",{className:"card-text",children:["Last Seen: ",this.state.myDevice.timestamp]}),Object(f.jsx)(m.b,{to:"/device/"+this.state.myDevice.id+"/edit",className:"btn btn-primary text-wrap","data-toggle":"tooltip","data-placement":"bottom",title:"Change Device Details",children:"Modify"}),Object(f.jsx)(m.b,{to:"/device/"+this.state.myDevice.id+"/logs",className:"btn btn-success text-wrap float-right",children:"Battery Logs"})]})})})}}]),a}(i.Component),ce=(a(128),function(e){var t=e.exact,a=e.path,s=e.component;return Object(f.jsx)(b.b,{exact:t,path:a,render:function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(C,{}),Object(f.jsx)(s,Object(p.a)({},e))]})}})}),re=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(f.jsx)(c.a.Fragment,{children:Object(f.jsx)(m.a,{children:Object(f.jsxs)(b.d,{children:[Object(f.jsx)(b.b,{exact:!0,path:"/",component:w}),Object(f.jsx)(b.b,{exact:!0,path:"/login",component:w}),Object(f.jsx)(b.b,{exact:!0,path:"/logout",component:_}),Object(f.jsx)(b.b,{exact:!0,path:"/signup",component:k}),Object(f.jsx)(ce,{exact:!0,path:"/home",component:Z}),Object(f.jsx)(ce,{exact:!0,path:"/device/new",component:se}),Object(f.jsx)(ce,{exact:!0,path:"/device/:handle",component:ie}),Object(f.jsx)(ce,{exact:!0,path:"/device/:handle/logs",component:y}),Object(f.jsx)(ce,{exact:!0,path:"/device/:handle/edit",component:ne}),Object(f.jsx)(ce,{exact:!0,path:"/user/edit",component:ae}),Object(f.jsx)(ce,{component:D})]})})})}}]),a}(i.Component),oe=a(147),le=a(82);o.a.render(Object(f.jsx)(oe.a,{backend:le.a,options:{enableMouseEvents:!0},children:Object(f.jsx)(J,{children:Object(f.jsx)(re,{})})}),document.getElementById("app"))},94:function(e,t,a){},95:function(e,t,a){}},[[129,1,2]]]);
//# sourceMappingURL=main.1cb5cde1.chunk.js.map