(this.webpackJsonpnew_frontend=this.webpackJsonpnew_frontend||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),r=a.n(n),c=a(54),i=a.n(c),o=(a(69),a(4)),l=a(5),d=a(7),h=a(6),j=a(12),m=a(9),p=a(10),u=(a(70),a(8)),b=a(58),v=a.n(b).a.create({baseURL:"http://ec2-3-141-49-132.us-east-2.compute.amazonaws.com/api"}),x=a(59),O=a.n(x),g=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={battery:[{device_battery:100,timestamp_time:""}],error:!1,loading:!0},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="/batteryLogs/"+this.props.match.params.handle;v.get(t).then((function(t){e.setState({battery:t.data}),console.log(t),console.log(e.state),e.setState({loading:!1})}))}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):this.state.error?this.state.redirect?Object(s.jsx)(m.a,{to:this.state.redirect}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"There was an error"}),Object(s.jsx)("h3",{children:this.state.error_response})]}):Object(s.jsxs)(r.a.Fragment,{children:[this.state.battery.map((function(e){return Object(s.jsx)("div",{className:"col mt-3 text-light",children:Object(s.jsx)("div",{className:"card bg-dark",children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsxs)("p",{className:"card-text",children:["Battery: ",e.device_battery,"%"]}),Object(s.jsxs)("p",{className:"card-text",children:["Last Seen: ",e.timestamp_time]})]})})})})),Object(s.jsx)(O.a,{style:{display:"flex",margin:"1em"},className:"btn btn-info float-right footer affix",data:this.state.battery,children:"Download CSV"})]})}}]),a}(n.Component),f=a(31),y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).toggleNavbar=s.toggleNavbar.bind(Object(f.a)(s)),s.state={collapsed:!0},s}return Object(l.a)(a,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this.state.collapsed,t=e?"collapse navbar-collapse justify-content-between":"collapse nav-bar collapse show justify-content-between",a=e?"navbar-toggler navbar-toggler-right collapsed":"navbar-toggler navbar-toggler-right";return Object(s.jsxs)("nav",{className:"navbar bg-primary navbar-expand-lg navbar-dark",children:[Object(s.jsx)(p.b,{to:"/home",className:"navbar-brand",children:"Know It's Off"}),Object(s.jsx)("button",{onClick:this.toggleNavbar,className:"".concat(a),type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(s.jsx)("span",{className:"navbar-toggler-icon"})}),Object(s.jsxs)("div",{className:"".concat(t),id:"navbarNavAltMarkup",children:[Object(s.jsxs)("div",{className:"navbar-nav",children:[Object(s.jsx)(p.b,{to:"/device/new",className:"nav-item nav-link text-light",children:"New Device"}),Object(s.jsx)(p.b,{to:"/user/edit",className:"nav-item nav-link text-light",children:"Edit User"})]}),Object(s.jsx)("div",{className:"navbar-nav",children:Object(s.jsx)(p.b,{to:"/logout",className:"nav-item nav-link text-light",children:"Logout"})})]})]})}}]),a}(n.Component),N=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{children:Object(s.jsx)("h3",{children:"404 Error: Page not found, this is a served error"})})}}]),a}(n.Component),S=a(14),w=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).doLogin=function(e){s.setState({postLoading:!0}),v.post("/login",{email:s.state.email,password:s.state.password,remember:s.state.remember}).then((function(e){s.setState({postLoading:!1,flag:!1}),s.props.history.push("/home")})).catch((function(e){s.setState({postLoading:!1,flag:!0})})),e.preventDefault()},s.handleChange=function(e){s.setState(Object(S.a)({},e.target.name,e.target.value))},s.toggleCheckbox=function(){s.setState((function(e){return{remember:!e.remember}}))},s.state={loading:!1,email:"",password:"",error:!1,flag:!1,postLoading:!1,remember:!0},s}return Object(l.a)(a,[{key:"render",value:function(){if(this.state.error)return Object(s.jsx)("div",{classNameName:"m-5",children:Object(s.jsx)("h3",{children:"There was an error"})});if(this.state.loading)return Object(s.jsx)("div",{classNameName:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})});var e=this.state.flag;return Object(s.jsxs)("div",{className:"mt-5 mb-5 container bg-dark border",children:[Object(s.jsx)("div",{className:"row justify-content-md-center text-light mt-5",children:Object(s.jsx)("h1",{children:"Log In to Know It's Off"})}),Object(s.jsx)("div",{className:"row justify-content-md-center text-light mb-5",children:Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[e&&Object(s.jsx)("div",{color:"red",children:"Email or password incorrect"}),Object(s.jsx)("label",{children:"Email address"}),Object(s.jsx)("input",{name:"email",type:"email",className:"form-control",value:this.state.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{name:"password",type:"password",onChange:this.handleChange,value:this.state.password,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})]}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{className:"form-check-input",type:"checkbox",checked:this.state.remember,onChange:this.toggleCheckbox,id:"checkbox"}),Object(s.jsx)("label",{className:"form-check-label",for:"checkbox",children:"Remember Me"})]}),Object(s.jsxs)("button",{onClick:this.doLogin,className:"btn btn-primary",children:["Submit",Object(s.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})]}),Object(s.jsx)(p.b,{id:"signupHelp",to:"/signup",className:"form-text text-muted",children:"Register New User"})]})})]})}}]),a}(n.Component),C=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).doSignup=function(e){s.setState({postLoading:!0}),v.post("/user",{email:s.state.email,password:s.state.password}).then((function(e){s.setState({postLoading:!1}),s.props.history.push("/login")})).catch((function(e){s.setState({postLoading:!1}),alert("Invalid username and password"),console.log(e)})),e.preventDefault()},s.handleChange=function(e){s.setState(Object(S.a)({},e.target.name,e.target.value))},s.state={loading:!1,email:"",password:"",error:!1,postLoading:!1},s}return Object(l.a)(a,[{key:"render",value:function(){return this.state.error?Object(s.jsx)("div",{classNameName:"m-5",children:Object(s.jsx)("h3",{children:"There was an error"})}):this.state.loading?Object(s.jsx)("div",{classNameName:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(s.jsxs)("div",{className:"mt-5 mb-5 container bg-dark border",children:[Object(s.jsx)("div",{className:"row justify-content-md-center mt-5",children:Object(s.jsx)("h1",{children:"Sign up to Know It's Off"})}),Object(s.jsx)("div",{className:"row justify-content-md-center mb-5",children:Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Email address"}),Object(s.jsx)("input",{name:"email",type:"email",className:"form-control",value:this.state.email,onChange:this.handleChange,id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"}),Object(s.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{name:"password",type:"password",onChange:this.handleChange,value:this.state.password,className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Confirm Password"}),Object(s.jsx)("input",{name:"passwordConf",type:"password",onChange:this.handleChange,value:this.state.passwordConf,className:"form-control",id:"exampleInputPassword2",placeholder:"Password"})]}),Object(s.jsxs)("button",{onClick:this.doSignup,className:"btn btn-primary",children:["Submit",Object(s.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})]})]})})]})}}]),a}(n.Component),D=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={error:!1,redirect:"/"},s}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.state.error?Object(s.jsx)("div",{classNameName:"m-5",children:Object(s.jsx)("h3",{children:"There was an error"})}):(v.get("/logout").then((function(){})).catch((function(){return Object(s.jsx)(m.a,{to:e.state.invalid})})),Object(s.jsx)(m.a,{to:this.state.invalid}))}}]),a}(n.Component),_=a(43),k=a(101),L=a(102),P=Object(n.memo)((function(e){var t=e.id,a=e.onMoveItem,s=e.children,c=Object(n.useRef)(null),i=Object(k.a)({item:{id:t,type:"IMG"},collect:function(e){return{isDragging:e.isDragging()}}}),o=Object(_.a)(i,2),l=o[0].isDragging,d=o[1],h=Object(L.a)({accept:"IMG",hover:function(e){e.id!==t&&a(e.id,t)}}),j=Object(_.a)(h,2)[1];d(c),j(c);var m={opacity:l?.5:1};return r.a.Children.map(s,(function(e){return r.a.cloneElement(e,{forwardedRef:c,style:m})}))})),z=a(62),E=a(42),I=a(32);function B(){var e=Object(E.a)(['\n  flex: 0 0 25%;\n  flex-grow: 0.75;\n  min-width: 250px;\n  max-width: 500px;\n  max-height: 270px;\n  display: flex;\n  justify-content: center;\n  align-items: stretch;\n  box-sizing: border-box;\n  :before {\n    content: "";\n    display: table;\n    padding-top: 100%;\n  }\n']);return B=function(){return e},e}function M(){var e=Object(E.a)(["\n  width: 100%;\n  padding: 0px 10px 0px 10px;\n  display: flex;\n  justify-content: start;\n  flex-wrap: wrap;\n"]);return M=function(){return e},e}var T=I.default.div(M()),U=I.default.div(B()),A=function(e){var t=e.forwardedRef,a=Object(z.a)(e,["forwardedRef"]);return Object(s.jsx)(U,Object(j.a)({ref:t},a))},H=a(36),R=a.n(H);function F(e,t,a){return function(e,t,a){return a>=e.length&&(a=e.length-1),e.splice(a,0,e.splice(t,1)[0]),e}(e,t,t+a)}var G=Object(n.createContext)({items:[]}),J=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).setItems=function(e){if(!R.a.get("idList")&&e)s.setState({items:e});else{var t,a,n=e.slice(),r=JSON.parse(R.a.get("idList")),c=[];for(t in r)for(a in n){n[a].id===r[t]&&(c.push(n[a]),n.splice(a,1))}}for(t in n)c.push(n[t]);c&&s.setState({items:c})},s.moveItem=function(e,t){var a=s.state.items.findIndex((function(t){return t.id===e})),n=s.state.items.findIndex((function(e){return e.id===t}));if(-1!==e&&-1!==t){var r,c=n-a;s.setState((function(e){return{items:F(e.items,a,c)}}));var i=[];for(r in s.state.items)i.push(s.state.items[r].id);R.a.set("idList",i)}},s.state={items:[],moveItem:s.moveItem,setItems:s.setItems},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsx)(G.Provider,{value:this.state,children:this.props.children})}}]),a}(n.Component),K=G,V=a(21),W=a(103),q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={device_id:e.props.device_id,device_battery:e.props.device_battery,appliance_name:e.props.appliance_name,device_state:e.props.state,timestamp:e.props.timestamp,statusText:"OFF",background:"light",loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.state?this.setState({background:"success",statusText:"ON"}):this.props.state||this.setState({background:"danger"}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(s.jsxs)(V.a,{bg:this.state.background,className:"tile text-center col ",children:[Object(s.jsx)(V.a.Header,{children:Object(s.jsx)(V.a.Title,{className:"card-title-device",children:this.state.appliance_name})}),Object(s.jsxs)(V.a.Body,{children:[Object(s.jsx)(V.a.Title,{className:"card-title-status",children:this.state.statusText}),Object(s.jsx)(V.a.Text,{className:"card-text-device_state",children:this.state.state}),Object(s.jsxs)(V.a.Text,{className:"card-text-timestamp",children:["Last Seen: ",this.state.timestamp]}),Object(s.jsx)(p.b,{className:"card-button btn btn-primary text-wrap",to:"/device/"+this.state.device_id,children:"Details"}),Object(s.jsx)("div",{className:"progressBar",children:Object(s.jsx)(W.a,{max:"100",min:"0",animated:!0,variant:"info",now:this.state.device_battery,label:"".concat(this.state.device_battery,"%")})})]})]})}}]),a}(n.Component);var Q=function(e){var t=Object(n.useContext)(K),a=t.items,r=t.moveItem;return Object(s.jsx)("div",{className:"GridApp",children:Object(s.jsx)(T,{children:a.map((function(e){return Object(s.jsx)(P,{id:e.id,onMoveItem:r,children:Object(s.jsx)(A,{children:Object(s.jsx)(q,{device_id:e.id,device_battery:e.device_battery,appliance_name:e.appliance_name,state:e.device_state,timestamp:e.timestamp},e.id)})},e.id)}))})})},X=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).count_dev_state=function(e){for(var t=0,a=0;e.length>a;a++)1===e[a].device_state&&t++;return t},s.state={myDevices:[],loading:!0,error:!1,redirect:null},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.get("/devices").then((function(t){e.setState({myDevices:t.data,num_on:e.count_dev_state(t.data)}),e.context.setItems(t.data),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1,error:!0}),console.log("error at get device: ",t.response)}))}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):this.state.error?this.state.redirect?Object(s.jsx)(m.a,{to:this.state.redirect}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"There was an error"}),Object(s.jsx)("h3",{children:this.state.error_response})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"row m-3 text-light",children:Object(s.jsx)("div",{className:"col",children:Object(s.jsx)("h1",{className:"text-center",children:"Home"})})}),Object(s.jsx)("div",{className:"row m-3 text-light",children:Object(s.jsx)("div",{className:"col",children:Object(s.jsxs)("h6",{className:"text-muted text-center",children:[this.state.num_on," of your appliances are on."]})})}),Object(s.jsx)(Q,{})]})}}]),a}(n.Component);X.contextType=K;var Y,Z=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).verify=function(e){s.setState({verifyLoad:!0}),v.post("/login",{email:s.state.current.email,password:s.state.current.password,remember:s.state.remember}).then((function(e){s.setState({verifyLoad:!1,detail_form:!0,flag:!1})})).catch((function(e){s.setState({verifyLoad:!1,flag:!0,error_response:e.response.status}),"not authorized"===e.response.data?s.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)})),e.preventDefault()},s.delete=function(e){s.setState({deleteLoad:!0}),!0===window.confirm("Are you sure?")?v.post("/login",{email:s.state.current.email,password:s.state.current.password}).then((function(e){v.delete("/user/current"),s.setState({deleteLoad:!1,redirect:"/"})})).catch((function(e){s.setState({deleteLoad:!1,flag:!0,error_response:e.response.status}),"not authorized"===e.response.data?s.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)})):s.setState({loading:!1})},s.handleChange=function(e){s.setState({current:Object(j.a)(Object(j.a)({},s.state.current),{},Object(S.a)({},e.target.name,e.target.value))})},s.handlePassChange=function(e){s.setState(Object(S.a)({},e.target.name,e.target.value))},s.update=function(e){s.setState({changeLoad:!0}),void 0===s.state.current.email||void 0===s.state.current.username?(alert("Fill out Username field."),s.setState({changeLoad:!1}),e.preventDefault()):s.state.confirmPass!==s.state.currentPass?(alert("Passwords do not match."),s.setState({changeLoad:!1}),e.preventDefault()):(v.post("/login",{email:s.state.current.email,password:s.state.current.password,remember:!0}).then((function(e){v.patch("/user/current",{email:s.state.current.email,password:s.state.confirmPass,username:s.state.current.username}).then((function(e){s.setState({changeLoad:!1}),alert("User Information Successfully Updated!")})).catch((function(e){s.setState({changeLoad:!1,error:!0,error_response:e.response.data}),"not authorized"===e.response.data?s.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)}))})).catch((function(e){s.setState({changeLoad:!1,error:!0,error_response:e.response.data}),"not authorized"===e.response.data?s.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)})),e.preventDefault())},s.state={current:{username:"",email:"",password:""},currentPass:"",confirmPass:"",detail_form:!1,flag:!1,loading:!0,verifyLoad:!1,deleteLoad:!1,changeLoad:!1,error:!1,redirect:null,remember:!0},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;!1===this.state.detail_form&&v.get("/user/current").then((function(t){e.setState({loading:!1,current:{username:t.data.username,email:t.data.email}})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.status}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response.data))}))}},{key:"render",value:function(){if(this.state.error)return Object(s.jsx)("div",{className:"m-5",children:Object(s.jsx)("h3",{children:"Error: Not Logged In"})});if(this.state.loading)return Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})});var e=this.state,t=e.detail_form,a=e.flag;return Object(s.jsxs)("div",{className:"m-5 text-light",children:[a&&Object(s.jsx)("div",{color:"red",children:"Email or password incorrect"}),Object(s.jsx)("h3",{children:"Enter User Details:"}),Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Email"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"email",id:"inputEmail",type:"email",onChange:this.handleChange,value:this.state.current.email})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"password",id:"inputPassword",type:"password",onChange:this.handleChange,value:this.state.current.password})]}),Object(s.jsxs)("button",{onClick:this.verify,className:"btn btn-success btn-space",children:["Verify and Change User Details",Object(s.jsx)(u.CircleSpinner,{size:10,color:"#3BBCE5",loading:this.state.verifyLoad})]}),Object(s.jsxs)("button",{onClick:this.delete,className:"btn btn-danger btn-space",children:["Delete User",Object(s.jsx)(u.CircleSpinner,{size:10,color:"#3BBCE5",loading:this.state.deleteLoad})]})]}),t&&Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Change Username"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"username",id:"inputUsername",type:"username",onChange:this.handleChange,value:this.state.current.username,placeholder:this.state.current.username})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Change Email"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"email",id:"inputEmail",type:"email",onChange:this.handleChange,value:this.state.current.email,placeholder:this.state.current.email})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Change Password"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"currentPass",id:"inputCurrentPass",type:"password",onChange:this.handlePassChange,value:this.state.currentPass,placeholder:this.state.currentPass})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Confirm Password"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"confirmPass",id:"inputConfirmPass",type:"password",onChange:this.handlePassChange,value:this.state.confirmPass,placeholder:this.state.confirmPass})]}),Object(s.jsxs)("button",{onClick:this.update,className:"btn btn-success btn-space",children:["Update Information",Object(s.jsx)(u.CircleSpinner,{size:10,color:"#3BBCE5",loading:this.state.changeLoad})]})]})]})}}]),a}(n.Component),$=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).postData=function(e){s.setState({postLoading:!0}),"0"===s.state.myDevice.id?(v.post("/device",s.state.myDevice).then((function(e){s.setState({myDevice:Object(j.a)(Object(j.a)({},s.state.myDevice),{},{id:e.data.id}),postLoading:!1,revealDetails:!0}),alert("Device Creation Successful!"),s.props.history.push("/home")})).catch((function(e){s.setState({postLoading:!1,error:!0,error_response:e.response.data}),"not authorized"===e.response.data?s.setState({redirect:"/"}):e.response.data&&console.log(e.response.data)})),e.preventDefault()):alert("New Device Already Created!")},s.handleChangeDevice=function(e){s.setState({myDevice:Object(j.a)(Object(j.a)({},s.state.myDevice),{},Object(S.a)({},e.target.name,e.target.value))})},s.state={myDevice:{id:"0",appliance_name:"My Appliance",device_state:0,device_battery:100},userDevices:[],applianceNames:[],disabled:!1,loading:!0,error:!1,postLoading:!1,redirect:null,revealDetails:!1},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.get("/devices").then((function(t){e.setState({loading:!1,usersDevices:t.data});var a,s=[];for(a in e.state.usersDevices)s.push([e.state.usersDevices[a].appliance_name,e.state.usersDevices[a].id,e.state.usersDevices[a].device_battery,e.state.usersDevices[a].device_state]);e.setState({applianceNames:s})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.data}),"not authorized"===t.response.data?e.setState({redirect:"/"}):t.response.data&&console.log(t.response.data))}))}},{key:"render",value:function(){if(this.state.error)return Object(s.jsx)("div",{className:"m-5",children:Object(s.jsx)("h3",{children:"There was an error"})});if(this.state.loading)return Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})});var e=this.state.revealDetails;return Object(s.jsxs)("div",{className:"m-5 text-light",children:[Object(s.jsx)("h3",{children:"New Device"}),Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Appliance Name"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"appliance_name",id:"inputScoutName","aria-describedby":"nameHelp",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name})]}),Object(s.jsxs)("button",{onClick:this.postData,className:"btn btn-success",children:["Add this device",Object(s.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.postLoading})]})]}),e&&Object(s.jsx)(q,{device_id:this.state.myDevice.id,device_battery:this.state.myDevice.device_battery,appliance_name:this.state.myDevice.appliance_name,state:this.state.myDevice.device_state,timestamp:this.state.myDevice.timestamp},this.state.myDevice.id)]})}}]),a}(n.Component),ee=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).updateDevice=function(e){s.setState({loading:!0}),v.patch(Y,s.state.myDevice).then((function(e){s.setState({loading:!1}),alert("Device Updated Successfully!"),s.props.history.push("/home")})).catch((function(e){s.setState({loading:!1,error:!0}),e.response.data&&console.log(e.response)})),e.preventDefault()},s.deleteDevice=function(e){!0===window.confirm("Do you really want to delete this, it will be permanent!")&&(v.delete(Y).then((function(e){s.setState({redirect:"/home",loading:!1}),alert("Device Removed Successfully!"),s.props.history.push("/home")})).catch((function(e){s.setState({error:!0}),e.response&&(console.log(e.response),s.setState({error_response:e.response.data}))})),e.preventDefault())},s.handleChangeDevice=function(e){s.setState({myDevice:Object(j.a)(Object(j.a)({},s.state.myDevice),{},Object(S.a)({},e.target.name,e.target.value))})},s.state={myDevice:{appliance_name:"My Appliance",device_state:1,device_battery:100,id:1},loading:!0,error:!1},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.handle;Y="/device/"+t,v.get(Y).then((function(t){e.setState({myDevice:{id:t.data.id,appliance_name:t.data.appliance_name,device_state:t.data.device_state,device_battery:t.data.device_battery},loading:!1})})).catch((function(t){e.setState({loading:!1,error:!0}),t.response&&(e.setState({error_response:t.response.data}),"not authorized"===t.response.data?e.setState({redirect:Y}):t.response.data&&console.log(t.response))}))}},{key:"render",value:function(){return this.state.error?this.state.redirect?Object(s.jsx)(m.a,{to:this.state.redirect}):Object(s.jsx)("div",{className:"m-5",children:Object(s.jsx)("h3",{children:"There was an error"})}):this.state.loading?Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):Object(s.jsxs)("div",{className:"m-5 text-light",children:[Object(s.jsx)("h3",{children:"Edit Device"}),Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Appliance Name"}),Object(s.jsx)("input",{className:"form-control text-dark",name:"appliance_name",id:"inputDeviceName","aria-describedby":"nameHelp",onChange:this.handleChangeDevice,value:this.state.myDevice.appliance_name})]}),Object(s.jsxs)("button",{onClick:this.updateDevice,className:"btn btn-success",children:["Update",Object(s.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading})]}),Object(s.jsxs)("button",{onClick:this.deleteDevice,className:"btn btn-danger",children:["Delete",Object(s.jsx)(u.CircleSpinner,{size:20,color:"#3BBCE5",loading:this.state.loading})]})]})]})}}]),a}(n.Component),te=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).state={myDevice:{appliance_name:"",device_state:1,device_battery:100,timestamp:"",id:1},error:!1,loading:!0},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="/device/"+this.props.match.params.handle;v.get(t).then((function(t){e.setState({myDevice:{id:t.data.id,appliance_name:t.data.appliance_name,device_state:t.data.device_state,device_battery:t.data.device_battery,timestamp:t.data.timestamp}}),e.setState({loading:!1})})).catch((function(t){e.setState({error:!0,loading:!1}),"not authorized"===t.response.data?e.setState({redirect:"/home"}):t.response.data&&console.log(t.response)}))}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)("div",{className:"d-flex justify-content-center m-5",children:Object(s.jsx)(u.CircleSpinner,{size:60,color:"#686769",loading:this.state.loading})}):this.state.error?this.state.redirect?Object(s.jsx)(m.a,{to:this.state.redirect}):Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"There was an error"}),Object(s.jsx)("h3",{children:this.state.error_response})]}):Object(s.jsx)("div",{className:"col mt-3 text-light",children:Object(s.jsx)("div",{className:"card bg-dark",children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h5",{className:"card-title text-wrap",children:this.state.myDevice.appliance_name}),Object(s.jsxs)("p",{className:"card-text",children:["State: ",this.state.myDevice.device_state?"ON":"OFF"]}),Object(s.jsxs)("p",{className:"card-text",children:["Battery: ",this.state.myDevice.device_battery,"%"]}),Object(s.jsxs)("p",{className:"card-text",children:["Last Seen: ",this.state.myDevice.timestamp]}),Object(s.jsx)(p.b,{to:"/device/"+this.state.myDevice.id+"/edit",className:"btn btn-primary text-wrap",children:"Modify device details"}),Object(s.jsx)(p.b,{to:"/device/"+this.state.myDevice.id+"/logs",className:"btn btn-success text-wrap float-right",children:"Battery Logs"})]})})})}}]),a}(n.Component),ae=(a(96),function(e){var t=e.exact,a=e.path,n=e.component;return Object(s.jsx)(m.b,{exact:t,path:a,render:function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)(y,{}),Object(s.jsx)(n,Object(j.a)({},e))]})}})}),se=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsx)(r.a.Fragment,{children:Object(s.jsx)(p.a,{children:Object(s.jsxs)(m.d,{children:[Object(s.jsx)(m.b,{exact:!0,path:"/",component:w}),Object(s.jsx)(m.b,{exact:!0,path:"/login",component:w}),Object(s.jsx)(m.b,{exact:!0,path:"/logout",component:D}),Object(s.jsx)(m.b,{exact:!0,path:"/signup",component:C}),Object(s.jsx)(ae,{exact:!0,path:"/home",component:X}),Object(s.jsx)(ae,{exact:!0,path:"/device/new",component:$}),Object(s.jsx)(ae,{exact:!0,path:"/device/:handle",component:te}),Object(s.jsx)(ae,{exact:!0,path:"/device/:handle/logs",component:g}),Object(s.jsx)(ae,{exact:!0,path:"/device/:handle/edit",component:ee}),Object(s.jsx)(ae,{exact:!0,path:"/user/edit",component:Z}),Object(s.jsx)(ae,{component:N})]})})})}}]),a}(n.Component),ne=a(100),re=a(61);i.a.render(Object(s.jsx)(ne.a,{backend:re.a,options:{enableMouseEvents:!0},children:Object(s.jsx)(J,{children:Object(s.jsx)(se,{})})}),document.getElementById("app"))}},[[97,1,2]]]);
//# sourceMappingURL=main.8ee14499.chunk.js.map