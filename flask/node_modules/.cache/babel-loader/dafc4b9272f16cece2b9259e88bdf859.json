{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/mnt/e/MyReact/new_frontend/src/components/editUser.js\";\nimport React, { Component } from 'react';\nimport { CircleSpinner } from 'react-spinners-kit';\nimport axiosBaseURL from '../axios.js';\nexport default class EditUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateUser = event => {\n      this.setState({\n        patchLoading: true\n      });\n\n      if (this.state.current_user.password !== this.state.confNewPassword) {\n        this.setState({\n          patchLoading: false\n        });\n        alert(\"Passwords dont match!\");\n        return;\n      }\n\n      axiosBaseURL.post('/login', {\n        email: this.state.current_user.email,\n        password: this.state.myPassword\n      }).then(result => {\n        axiosBaseURL.patch('/users/current', this.state.current_user).then(result => {\n          this.setState({\n            patchLoading: false\n          });\n          alert(\"User updated.\");\n        }).catch(error => {\n          this.setState({\n            patchLoading: false,\n            error_response: error.response.status\n          });\n\n          if (error.response.data === \"not authorized\") {\n            this.setState({\n              redirect: \"/\"\n            });\n          } else if (error.response.data) {\n            console.log(error.response.data);\n          }\n        });\n      }).catch(error => {\n        this.setState({\n          patchLoading: false\n        });\n        alert(\"Please enter a valid password\");\n      });\n      event.preventDefault();\n    };\n\n    this.deleteUser = event => {\n      this.setState({\n        deleteLoading: true\n      });\n      const r = window.confirm(\"Do you really want to delete this, it will be permanent!\");\n\n      if (r === true) {\n        axiosBaseURL.delete('/users/current').then(result => {\n          alert(\"Your account had been deleted\");\n          this.setState({\n            deleteLoading: false,\n            redirect: \"/\"\n          });\n        }).catch(error => {\n          this.setState({\n            deleteLoading: false,\n            error_response: error.response.data\n          });\n\n          if (error.response.data === \"not authorized\") {\n            this.setState({\n              redirect: \"/\"\n            });\n          } else if (error.response.data) {\n            console.log(error.response.data);\n          }\n        });\n      } else {\n        this.setState({\n          deleteLoading: false\n        });\n      }\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        current_user: { ...this.state.current_user,\n          [event.target.name]: event.target.value\n        }\n      });\n    };\n\n    this.handlePassChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = {\n      current_user: {\n        username: \"\",\n        email: \"\",\n        password: \"\"\n      },\n      myPassword: \"\",\n      confNewPassword: \"\",\n      loading: true,\n      error: false,\n      patchLoading: false,\n      deleteLoading: false,\n      redirect: null\n    };\n  } //Get users appliances, add the names to the select form element\n\n\n  componentDidMount() {\n    axiosBaseURL.get(\"/users/current\") //can put anything in for an id here, it will always return the current_user\n    .then(result => {\n      this.setState({\n        loading: false,\n        current_user: {\n          username: result.data.username,\n          email: result.data.email,\n          password: \"\"\n        }\n      });\n    }).catch(error => {\n      this.setState({\n        loading: false,\n        error: true\n      });\n\n      if (error.response) {\n        this.setState({\n          error_response: error.response.status\n        });\n\n        if (error.response.data === \"not authorized\") {\n          this.setState({\n            redirect: \"/\"\n          });\n        } else if (error.response.data) {\n          console.log(error.response.data);\n        }\n      }\n    });\n  }\n\n  render() {\n    if (this.state.error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-5\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"There was an error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center m-5\",\n        children: /*#__PURE__*/_jsxDEV(CircleSpinner, {\n          size: 60,\n          color: \"#686769\",\n          loading: this.state.loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit User - Some fields are optional.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"username\",\n            id: \"inputUser\",\n            \"aria-describedby\": \"nameHelp\",\n            onChange: this.handleChange,\n            value: this.state.current_user.username,\n            placeholder: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email - Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"email\",\n            id: \"inputEmail\",\n            type: \"email\",\n            onChange: this.handleChange,\n            value: this.state.current_user.email,\n            placeholder: \"email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"New Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"password\",\n            id: \"inputNewPassword\",\n            type: \"password\",\n            onChange: this.handleChange,\n            value: this.state.current_user.password,\n            placeholder: \"new password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Confirm New Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"confNewPassword\",\n            id: \"inputConfNewPassword\",\n            type: \"password\",\n            onChange: this.handlePassChange,\n            value: this.state.confNewPassword,\n            placeholder: \"new password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Current Password - Required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            name: \"myPassword\",\n            id: \"inputCurrentPassword\",\n            type: \"password\",\n            onChange: this.handlePassChange,\n            value: this.state.myPassword,\n            placeholder: \"current password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.updateUser,\n          className: \"btn btn-success\",\n          children: [\"Update User Settings\", /*#__PURE__*/_jsxDEV(CircleSpinner, {\n            size: 20,\n            color: \"#3BBCE5\",\n            loading: this.state.patchLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 86\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.deleteUser,\n          className: \"btn btn-danger\",\n          children: [\"Delete User Permantenly\", /*#__PURE__*/_jsxDEV(CircleSpinner, {\n            size: 20,\n            color: \"#3BBCE5\",\n            loading: this.state.deleteLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 88\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 1\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/mnt/e/MyReact/new_frontend/src/components/editUser.js"],"names":["React","Component","CircleSpinner","axiosBaseURL","EditUser","constructor","props","updateUser","event","setState","patchLoading","state","current_user","password","confNewPassword","alert","post","email","myPassword","then","result","patch","catch","error","error_response","response","status","data","redirect","console","log","preventDefault","deleteUser","deleteLoading","r","window","confirm","delete","handleChange","target","name","value","handlePassChange","username","loading","componentDidMount","get","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {CircleSpinner} from 'react-spinners-kit' \nimport axiosBaseURL from '../axios.js'\n\n\nexport default class EditUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current_user: {\n         username: \"\",\n         email: \"\",\n         password: \"\"\n      },\n      myPassword: \"\",\n      confNewPassword: \"\",\n\t   loading: true,\n\t   error: false,\n\t   patchLoading: false,\n      deleteLoading: false,\n      redirect: null\n    };\n  }\n\n   //Get users appliances, add the names to the select form element\n   componentDidMount() {\n      axiosBaseURL.get(\"/users/current\")  //can put anything in for an id here, it will always return the current_user\n      .then((result) => {\n         this.setState({\n            loading: false,\n            current_user: {\n               username: result.data.username,\n               email: result.data.email,\n               password: \"\"\n            }\n         });\n         \n      })\n      .catch( (error) => {\n         this.setState({loading: false, error: true});\n         if(error.response){\n            this.setState({error_response: error.response.status});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         }\n      })\n   }\n\n   updateUser = (event) => {\n      this.setState({patchLoading:true});\n      if(this.state.current_user.password !== this.state.confNewPassword){\n         this.setState({patchLoading:false});\n         alert(\"Passwords dont match!\")\n         return\n      }\n      axiosBaseURL.post('/login', {email: this.state.current_user.email, password: this.state.myPassword})\n      .then((result) => {\n         axiosBaseURL.patch('/users/current', this.state.current_user)\n         .then((result) => {\n            this.setState({patchLoading: false});\n            alert(\"User updated.\");\n         })\n         .catch((error) => {\n            this.setState({patchLoading:false, error_response: error.response.status});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         })\n      })\n      .catch((error) => {\n         this.setState({patchLoading:false})\n         alert(\"Please enter a valid password\")\n      })\n      event.preventDefault();\n   }\n   deleteUser = (event) => {\n      this.setState({deleteLoading:true});\n      const r = window.confirm(\"Do you really want to delete this, it will be permanent!\");\n      if(r === true){\n         axiosBaseURL.delete('/users/current')\n         .then((result) => { \n            alert(\"Your account had been deleted\")\n            this.setState({deleteLoading: false, redirect:\"/\"});\n         })\n         .catch((error) => {\n            this.setState({deleteLoading:false,error_response: error.response.data});\n            if(error.response.data === \"not authorized\"){ this.setState({redirect: \"/\"}) }\n            else if (error.response.data){console.log(error.response.data)}\n         })\n      }\n      else{ this.setState({deleteLoading: false}) }\n   }\n\n   handleChange = (event) => {\n      this.setState({\n         current_user: {...this.state.current_user,[event.target.name]: event.target.value}\n      });\n   };\n   handlePassChange = (event) => {\n      this.setState({[event.target.name]: event.target.value})\n   }\n\n\trender(){\n\t\tif(this.state.error){ \n         return(<div className=\"m-5\"><h3>There was an error</h3></div>) \n      }\n\t\tif(this.state.loading){\n         return (\n            <div className=\"d-flex justify-content-center m-5\">\n               <CircleSpinner size={60} color=\"#686769\" loading={this.state.loading} />\n            </div>)\n\t\t}\n\t\treturn(\n<div className=\"m-5\">\n<h3>Edit User - Some fields are optional.</h3>\n<form>\n   <div className=\"form-group\">\n      <label>Username</label>\n      <input className=\"form-control\" name=\"username\" id=\"inputUser\" aria-describedby=\"nameHelp\" onChange={this.handleChange} value={this.state.current_user.username} placeholder=\"username\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Email - Required</label>\n      <input className=\"form-control\" name=\"email\" id=\"inputEmail\" type=\"email\" onChange={this.handleChange} value={this.state.current_user.email} placeholder=\"email\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>New Password</label>\n      <input className=\"form-control\" name=\"password\" id=\"inputNewPassword\" type=\"password\" onChange={this.handleChange} value={this.state.current_user.password} placeholder=\"new password\"/>\n   </div>\n   \n   <div className=\"form-group\">\n      <label>Confirm New Password</label>\n      <input className=\"form-control\" name=\"confNewPassword\" id=\"inputConfNewPassword\" type=\"password\" onChange={this.handlePassChange} value={this.state.confNewPassword} placeholder=\"new password\"/>\n   </div>\n\n   <div className=\"form-group\">\n      <label>Current Password - Required</label>\n      <input className=\"form-control\" name=\"myPassword\" id=\"inputCurrentPassword\" type=\"password\" onChange={this.handlePassChange} value={this.state.myPassword} placeholder=\"current password\"/>\n   </div>\n\n   <button onClick={this.updateUser} className=\"btn btn-success\">Update User Settings<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.patchLoading} /></button>\n   <button onClick={this.deleteUser} className=\"btn btn-danger\">Delete User Permantenly<CircleSpinner size={20} color=\"#3BBCE5\" loading={this.state.deleteLoading} /></button>\n</form>\n</div>\n\t\t)\n\t}\n}\n\n"]},"metadata":{},"sourceType":"module"}